function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){if(!window.hasOwnProperty("_"))throw new Error("Underscore/Lodash not found: _");!function(){"use strict";Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)};return function(e){var n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var o,s=r(n.length),u=t(this)?Object(new this(s)):new Array(s),l=0;l<s;)o=n[l],u[l]=a?void 0===i?a(o,l):a.call(i,o,l):o,l+=1;return u.length=s,u}}())}(),function(){"use strict";window.assertions=window.assertions||{},window.assertions.assertFunction=window.assertions.assertFunction||function(e,t){if(!e){if(window.navigator&&"Microsoft Internet Explorer"===window.navigator.appName)try{throw new Error}catch(e){t=t+", stack=\n"+e.stack}var n=t?"Assertion failed: "+t:"Assertion failed";throw console&&console.log&&console.log(n),new Error(n)}},window.assert=window.assert||null,window.assertSlow=window.assertSlow||null,window.assertions.enableAssert=function(){window.assert=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assert")},window.assertions.disableAssert=function(){window.assert=null,window.console&&window.console.log&&window.console.log("disabling assert")},window.assertions.enableAssertSlow=function(){window.assertSlow=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assertSlow")},window.assertions.disableAssertSlow=function(){window.assertSlow=null,window.console&&window.console.log&&window.console.log("disabling assertSlow")}}(),function(){"use strict";window.phetio=window.phetio||{};var e="general";window.phetio.PhetioIDUtils={append:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){e+="."+t}),e},getComponentName:function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1,e.length)},getParentID:function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substring(0,t)},getDOMElementID:function(e){return"phetioID:"+e},getGeneralID:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=phetio.PhetioIDUtils).append.apply(n,[t.CAMEL_CASE_SIMULATION_NAME].concat([e].concat(i)))},getScreenID:function(e){for(var t=[],n=e.split("."),r=0;r<n.length;r++){var i=n[r];t.push(i);var a=i.indexOf("Screen");if(a>0&&a+"Screen".length===i.length)return t.join(".")}return null},getGroupMemberIndex:function(e){return parseInt(e.split(phetio.PhetioIDUtils.GROUP_SEPARATOR)[1],10)},SEPARATOR:".",GROUP_SEPARATOR:"_",GENERAL_COMPONENT_NAME:e,GLOBAL_COMPONENT_NAME:"global"}}();var e,t,n;!function(r){function i(e,t){return v.call(e,t)}function a(e,t){var n,r,i,a,o,s,u,l,c,p,h,d=t&&t.split("/"),f=y.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),o=(e=e.split("/")).length-1,y.nodeIdCompat&&T.test(e[o])&&(e[o]=e[o].replace(T,"")),e=d.concat(e),c=0;c<e.length;c+=1)if("."===(h=e[c]))e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||m)&&f){for(c=(n=e.split("/")).length;c>0;c-=1){if(r=n.slice(0,c).join("/"),d)for(p=d.length;p>0;p-=1)if((i=f[d.slice(0,p).join("/")])&&(i=i[r])){a=i,s=c;break}if(a)break;!u&&m&&m[r]&&(u=m[r],l=c)}!a&&u&&(a=u,s=l),a&&(n.splice(0,s,a),e=n.join("/"))}return e}function o(e,t){return function(){return p.apply(r,O.call(arguments,0).concat([e,t]))}}function s(e){return function(t){f[e]=t}}function u(e){if(i(m,e)){var t=m[e];delete m[e],E[e]=!0,c.apply(r,t)}if(!i(f,e)&&!i(E,e))throw new Error("No "+e);return f[e]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}var c,p,h,d,f={},m={},y={},E={},v=Object.prototype.hasOwnProperty,O=[].slice,T=/\.js$/;h=function(e,t){var n,r=l(e),i=r[0];return e=r[1],i&&(n=u(i=a(i,t))),i?e=n&&n.normalize?n.normalize(e,function(e){return function(t){return a(t,e)}}(t)):a(e,t):(i=(r=l(e=a(e,t)))[0],e=r[1],i&&(n=u(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},d={require:function(e){return o(e)},exports:function(e){var t=f[e];return void 0!==t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:function(e){return function(){return y&&y.config&&y.config[e]||{}}}(e)}}},c=function(e,t,n,a){var l,c,p,y,v,O,T=[],g=void 0===n?"undefined":_typeof(n);if(a=a||e,"undefined"===g||"function"===g){for(t=!t.length&&n.length?["require","exports","module"]:t,v=0;v<t.length;v+=1)if(y=h(t[v],a),"require"===(c=y.f))T[v]=d.require(e);else if("exports"===c)T[v]=d.exports(e),O=!0;else if("module"===c)l=T[v]=d.module(e);else if(i(f,c)||i(m,c)||i(E,c))T[v]=u(c);else{if(!y.p)throw new Error(e+" missing "+c);y.p.load(y.n,o(a,!0),s(c),{}),T[v]=f[c]}p=n?n.apply(f[e],T):void 0,e&&(l&&l.exports!==r&&l.exports!==f[e]?f[e]=l.exports:p===r&&O||(f[e]=p))}else e&&(f[e]=n)},e=t=p=function(e,t,n,i,a){if("string"==typeof e)return d[e]?d[e](t):u(h(e,t).f);if(!e.splice){if((y=e).deps&&p(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},"function"==typeof n&&(n=i,i=a),i?c(r,e,t,n):setTimeout(function(){c(r,e,t,n)},4),p},p.config=function(e){return p(e)},e._defined=f,(n=function(e,t,n){t.splice||(n=t,t=[]),i(f,e)||i(m,e)||(m[e]=[e,t,n])}).amd={jQuery:!0}}(),n("almond",function(){}),n("PHET_CORE/Namespace",["require"],function(e){"use strict";function t(e){this.name=e,window.phet&&(window.phet[e]=this)}return t.prototype={constructor:t,register:function(e,t){if(e.indexOf(".")<0)this[e]=t;else{for(var n=e.split("."),r=this,i=0;i<n.length-1;i++)r=r[n[i]];var a=n[n.length-1];r[a]=t}return t}},t}),n("AXON/axon",["require","PHET_CORE/Namespace"],function(e){"use strict";return new(e("PHET_CORE/Namespace"))("axon")}),n("PHET_CORE/phetCore",["require","PHET_CORE/Namespace"],function(e){"use strict";var t=e("PHET_CORE/Namespace"),n=new t("phetCore");return n.register("Namespace",t),n}),n("PHET_CORE/merge",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){n(e);for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return _.each(a,function(i){if(i){n(i);for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];_.endsWith(a,r)&&a!==r?(n(o),e[a]=t(e[a]||{},o)):e[a]=o}}}),e}function n(e){}var r="Options";return e("PHET_CORE/phetCore").register("merge",t)}),n("PHET_CORE/Enumeration",["require","PHET_CORE/merge","PHET_CORE/phetCore"],function(e){"use strict";var t=e("PHET_CORE/merge"),n=e("PHET_CORE/phetCore"),r=function(){function e(n){var r=this;_classCallCheck(this,e);n.keys,n.map;var i=n.keys||Object.keys(n.map),a=n.map||{};n=t({phetioDocumentation:null,beforeFreeze:null},n),this.phetioDocumentation=n.phetioDocumentation,this.KEYS=i,this.VALUES=[],i.forEach(function(e){var t=a[e]||{};t.name=e,t.toString=function(){return e},r[e]=t,r.VALUES.push(t)}),n.beforeFreeze&&n.beforeFreeze(this)}return _createClass(e,[{key:"includes",value:function(e){return _.includes(this.VALUES,e)}}],[{key:"byKeys",value:function(n,r){return new e(t({keys:n},r))}},{key:"byMap",value:function(n,r){return new e(t({map:n},r))}}]),e}();return n.register("Enumeration",r)}),n("AXON/ValidatorDef",["require","AXON/axon","PHET_CORE/Enumeration","PHET_CORE/merge"],function(e){"use strict";var t=e("AXON/axon"),n=e("PHET_CORE/Enumeration"),r=e("PHET_CORE/merge"),i=["string","number","boolean","function"],a={assertions:!1},o=["valueType","validValues","isValidValue","arrayElementType","phetioType"],s={isValidValidator:function(e,t){if(t=t||a,!(e instanceof Object))return!1;if(!(e.hasOwnProperty("isValidValue")||e.hasOwnProperty("valueType")||e.hasOwnProperty("arrayElementType")||e.hasOwnProperty("validValues")||e.hasOwnProperty("phetioType")))return!1;if(e.hasOwnProperty("valueType")&&!u(e.valueType,t))return!1;if(e.hasOwnProperty("arrayElementType")){if(e.hasOwnProperty("valueType"))return!1;if(!u(e.arrayElementType,t))return!1}if(e.hasOwnProperty("isValidValue")&&"function"!=typeof e.isValidValue&&null!==e.isValidValue&&void 0!==e.isValidValue)return!1;if(void 0!==e.validValues&&null!==e.validValues){if(!Array.isArray(e.validValues))return!1;var n=_.omit(e,"validValues");if(s.containsValidatorKey(n))for(var r=0;r<e.validValues.length;r++)if(!s.isValueValid(e.validValues[r],n))return!1}return!e.hasOwnProperty("phetioType")||!(!e.phetioType||!e.phetioType.validator)&&s.isValidValidator(e.phetioType.validator,t)},validateValueType:function(e,t){return("function"==typeof e||"string"==typeof e||e instanceof n||null===e||void 0===e)&&!("string"==typeof e&&!_.includes(i,e))},validateValidator:function(e){},containsValidatorKey:function(e){for(var t=0;t<o.length;t++)if(e.hasOwnProperty(o[t]))return!0;return!1},isValueValid:function(e,n,i){if((i=r({validateValidator:!0,assertions:!1},i)).validateValidator&&!t.ValidatorDef.isValidValidator(n,i))return!1;if(n.hasOwnProperty("valueType")){var o=n.valueType;if(Array.isArray(o)){if(!_.some(o.map(function(t){return s.isValueValidValueType(e,t,a)})))return!1}else if(o&&!s.isValueValidValueType(e,o,i))return!1}if(n.hasOwnProperty("arrayElementType")){var u=n.arrayElementType;if(!s.isValueValid(e,{valueType:Array},i))return!1;if(!_.every(e.map(function(e){return Array.isArray(u)?!!_.some(u.map(function(t){return s.isValueValidValueType(e,t,a)})):s.isValueValidValueType(e,n.arrayElementType,i)})))return!1}return(!n.hasOwnProperty("validValues")||-1!==n.validValues.indexOf(e))&&(!(n.hasOwnProperty("isValidValue")&&!n.isValidValue(e))&&!(n.hasOwnProperty("phetioType")&&!s.isValueValid(e,n.phetioType.validator,a)))},isValueValidValueType:function(e,t,r){return("string"!=typeof t||(void 0===e?"undefined":_typeof(e))===t)&&(!(t===Array&&!Array.isArray(e))&&(!(t instanceof n&&!t.includes(e))&&(("function"!=typeof t||e instanceof t)&&(null!==t||null===e))))}},u=function(e,t){if(Array.isArray(e)){if(!_.every(e.map(function(e){return s.validateValueType(e,t)})))return!1}else if(e&&!s.validateValueType(e,t))return!1;return!0};return s.VALIDATOR_KEYS=o,t.register("ValidatorDef",s)}),n("TANDEM/tandemNamespace",["require","PHET_CORE/Namespace"],function(e){"use strict";return new(e("PHET_CORE/Namespace"))("tandem")}),n("AXON/validate",["require","AXON/axon","PHET_CORE/merge","AXON/ValidatorDef"],function(e){"use strict";var t=e("AXON/axon"),n=(e("PHET_CORE/merge"),e("AXON/ValidatorDef"),function(e,t,n){return e});return n.stringWithoutTemplateVars=function(e){return n(e)},t.register("validate",n)}),n("TANDEM/types/ObjectIO",["require","AXON/ValidatorDef","TANDEM/tandemNamespace","AXON/validate"],function(e){"use strict";e("AXON/ValidatorDef");var t=e("TANDEM/tandemNamespace"),n=e("AXON/validate"),r=function(){function e(t,r){_classCallCheck(this,e),this.phetioObject=t,this.phetioID=r,n(t,this.constructor.validator)}return _createClass(e,null,[{key:"toStateObject",value:function(e){return e}},{key:"fromStateObject",value:function(e){return e}},{key:"stateToArgsForConstructor",value:function(e){return[]}},{key:"setValue",value:function(e,t){}},{key:"getSupertype",value:function(e){var t=Object.getPrototypeOf(e);return t===Object.getPrototypeOf(window.Object)?null:t}},{key:"validateSubtype",value:function(e){var t=e.typeName;t.split(/[<(]/)[0];for(var n in e.methods){var r=e.methods[n];"object"===(void 0===r?"undefined":_typeof(r))&&r.parameterTypes.forEach(function(e){})}e.hasOwnProperty("methodOrder")&&e.methodOrder.forEach(function(e){})}}]),e}();return r.isIOType=function(e){return e===r||e.prototype instanceof r},r.methods={},r.documentation="The root of the wrapper object hierarchy.",r.typeName="ObjectIO",r.validator={valueType:Object},r.validateSubtype(r),t.register("ObjectIO",r)}),n("TANDEM/types/BooleanIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/types/ObjectIO"),n=e("TANDEM/tandemNamespace"),r=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return _inherits(n,t),_createClass(n,null,[{key:"toStateObject",value:function(e){return e}},{key:"fromStateObject",value:function(e){return e}}]),n}();return r.validator={valueType:"boolean"},r.documentation="Wrapper for the built-in JS boolean type (true/false)",r.typeName="BooleanIO",t.validateSubtype(r),n.register("BooleanIO",r)}),n("PHET_CORE/extend",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return _.each(Array.prototype.slice.call(arguments,1),function(t){if(t)for(var n in t)Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}return e("PHET_CORE/phetCore").register("extend",t),t}),n("PHET_CORE/inherit",["require","PHET_CORE/extend","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t,r,i){function a(){}return a.prototype=e.prototype,t.prototype=n(new a,{constructor:t},r),n(t,i),t}var n=e("PHET_CORE/extend");return e("PHET_CORE/phetCore").register("inherit",t),t}),n("AXON/Multilink",["require","AXON/axon","PHET_CORE/inherit"],function(e){"use strict";function t(e,t,n){this.dependencies=e;var r=this;this.dependencyListeners=[],e.forEach(function(n,i){var a=function(n){r.isDisposed||t.apply(null,e.map(function(e){return e.get()}))};r.dependencyListeners.push(a),n.lazyLink(a)}),n||t.apply(null,e.map(function(e){return e.get()})),this.isDisposed=!1}var n=e("AXON/axon"),r=e("PHET_CORE/inherit");return n.register("Multilink",t),r(Object,t,{dispose:function(){for(var e=0;e<this.dependencies.length;e++){var t=this.dependencies[e];t.isDisposed||t.unlink(this.dependencyListeners[e])}this.dependencies=null,this.dependencyListeners=null,this.isDisposed=!0}})}),n("TANDEM/types/NullableIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace","AXON/ValidatorDef"],function(e){"use strict";function t(e){return a.hasOwnProperty(e.typeName)||(a[e.typeName]=o(e)),a[e.typeName]}var n=e("TANDEM/types/ObjectIO"),r=e("TANDEM/tandemNamespace"),i=e("AXON/ValidatorDef"),a={},o=function(e){var t=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,n),_createClass(r,null,[{key:"toStateObject",value:function(t){return null===t?null:e.toStateObject(t)}},{key:"fromStateObject",value:function(t){return null===t?null:e.fromStateObject(t)}}]),r}();return t.documentation="A wrapper to wrap another IOType, adding support for null.",t.validator={isValidValue:function(t){return null===t||i.isValueValid(t,e.validator)}},t.typeName="NullableIO<"+e.typeName+">",t.parameterTypes=[e],n.validateSubtype(t),t};return r.register("NullableIO",t),t}),n("PHET_CORE/assertMutuallyExclusiveOptions",["require","PHET_CORE/phetCore"],function(e){"use strict";return e("PHET_CORE/phetCore").register("assertMutuallyExclusiveOptions",function(e){})}),n("PHET_CORE/EnumerationIO",["require","PHET_CORE/Enumeration","PHET_CORE/phetCore","TANDEM/types/ObjectIO"],function(e){"use strict";e("PHET_CORE/Enumeration");var t=e("PHET_CORE/phetCore"),n=e("TANDEM/types/ObjectIO"),r={},i=function(e){var t=function(t){function i(e,t){return _classCallCheck(this,i),_possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t))}return _inherits(i,n),_createClass(i,null,[{key:"toStateObject",value:function(e){return r(e)}},{key:"fromStateObject",value:function(t){return e[t]}}]),i}(),r=function(e){return e.name},i=e.VALUES.map(r),a=e.phetioDocumentation?" "+e.phetioDocumentation:"";return t.validator={valueType:e},t.documentation="Possible values: "+i+"."+a,t.typeName="EnumerationIO("+i.join("|")+")",n.validateSubtype(t),t};return t.register("EnumerationIO",function(e){var t=e.KEYS.join("");return r.hasOwnProperty(t)||(r[t]=i(e)),r[t]})}),n("TANDEM/EventType",["require","PHET_CORE/Enumeration","PHET_CORE/EnumerationIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("PHET_CORE/Enumeration"),n=e("PHET_CORE/EnumerationIO"),r=e("TANDEM/tandemNamespace"),i=t.byKeys(["USER","MODEL","WRAPPER"],{beforeFreeze:function(e){e.phetioType=n(e)}});return r.register("EventType",i)}),n("TANDEM/LinkedElementIO",["require","TANDEM/tandemNamespace","TANDEM/types/ObjectIO"],function(e){"use strict";var t=e("TANDEM/tandemNamespace"),n=e("TANDEM/types/ObjectIO"),r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),_createClass(t,null,[{key:"toStateObject",value:function(e){return{elementID:e.element.tandem.phetioID}}},{key:"fromStateObject",value:function(e){return{}}}]),t}();return r.documentation="A LinkedElement",r.validator={isValidValue:function(){return!0}},r.typeName="LinkedElementIO",n.validateSubtype(r),t.register("LinkedElementIO",r)}),n("TANDEM/phetioAPIValidation",["require","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/tandemNamespace"),n=function(){function e(){_classCallCheck(this,e),this.apiMismatches=[],this.simHasStarted=!1,this.enabled=!1,this.everyPhetioType={},this.validateOverridesFile()}return _createClass(e,[{key:"onSimStarted",value:function(e){if(this.enabled){var t=e.getPhetioElementsBaseline(),n=e.getPhetioTypes();if(null===phet.chipper.queryParameters.screens){for(var r in window.phet.phetio.phetioElementsBaseline)!window.phet.phetio.phetioElementsBaseline.hasOwnProperty(r)||e.phetioObjectMap[r]||window.phet.phetio.phetioElementsBaseline[r].phetioDynamicElement||this.addError({phetioID:r,ruleInViolation:"5. When the sim is finished starting up, all non-dynamic schema entries must be registered.",message:"phetioID expected but does not exist"});if(_.isEqual(t,window.phet.phetio.phetioElementsBaseline)||this.addError({ruleInViolation:"2. Registered PhetioObject baseline must equal baseline schema to ensure that baseline changes are intentional.",message:"baseline schema does not match PhetioObject computed baseline metadata",phetioElementsBaseline:t,stringifiedBaseline:JSON.stringify(window.phet.preloads.phetCore.copyWithSortedKeys(t),null,2),phetioElementsBaselineFromFile:window.phet.phetio.phetioElementsBaseline}),!_.isEqual(n,window.phet.phetio.phetioTypes)){var i=Object.keys(n),a=Object.keys(window.phet.phetio.phetioTypes);this.addError({ruleInViolation:"9. Types in the sim must exactly match types in the types file to ensure that type changes are intentional.",message:"phetioTypes are not equivalent",areKeysEquivalent:_.isEqual(i.sort(),a.sort()),typesNotInSim:a.filter(function(e){return!i.includes(e)}),typesNotInFile:i.filter(function(e){return!a.includes(e)})})}this.assertOutIfErrorsPresent()}this.simHasStarted=!0}}},{key:"onPhetioObjectRemoved",value:function(e){if(this.enabled){var t=e.tandem.phetioID;e.phetioDynamicElement||-1!==t.indexOf("~")||this.addError({phetioID:t,ruleInViolation:"6. Any static, registered PhetioObject can never be deregistered."})}}},{key:"onPhetioObjectAdded",value:function(e){var t=this;if(this.enabled){var n=e.phetioType;if(this.everyPhetioType[n.typeName]||(this.everyPhetioType[n.typeName]=n),this.simHasStarted&&-1===e.tandem.phetioID.indexOf("~")){var r=e.tandem.getConcretePhetioID(),i=window.phet.phetio.phetioElementsBaseline[r];phet.axon.timer.setTimeout(function(){i.phetioIsArchetype&&e.phetioDynamicElement||t.addError({phetioID:e.tandem.phetioID,ruleInViolation:"4. After startup, only dynamic instances prescribed by the baseline file can be registered."})},0)}}}},{key:"validateOverridesFile",value:function(){if(this.enabled){for(var e in window.phet.phetio.phetioElementsOverrides)if(window.phet.phetio.phetioElementsBaseline.hasOwnProperty(e)){var t=window.phet.phetio.phetioElementsOverrides[e],n=window.phet.phetio.phetioElementsBaseline[e];0===Object.keys(t).length&&this.addError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"no metadata keys found for this override."});for(var r in t)n.hasOwnProperty(r)||this.addError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata key not found in the baseline: "+r}),t[r]===n[r]&&this.addError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata override value is the same as the corresponding metadata value in the baseline."})}else this.addError({phetioID:e,ruleInViolation:"7. Any schema entries in the overrides file must exist in the baseline file.",message:"phetioID expected in the baseline file but does not exist"});this.assertOutIfErrorsPresent()}}},{key:"assertOutIfErrorsPresent",value:function(){}},{key:"addError",value:function(e){e.stack=(new Error).stack,this.apiMismatches.push(e),this.simHasStarted&&this.assertOutIfErrorsPresent()}}]),e}();return t.register("phetioAPIValidation",new n)}),n("PHET_CORE/arrayRemove",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){var n=_.indexOf(e,t);e.splice(n,1)}return e("PHET_CORE/phetCore").register("arrayRemove",t),t}),n("text",["module"],function(e){"use strict";var n,r,i,a,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,p=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,d=c&&(location.port||void 0),f={},m=e.config&&e.config()||{};return n={version:"2.0.12",strip:function(e){if(e){var t=(e=e.replace(u,"")).match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(e){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,a=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==a&&(!o||a>1)?(t=e.substring(0,a),n=e.substring(a+1,e.length)):t=e,r=n||t,-1!==(a=r.indexOf("!"))&&(i="strip"===r.substring(a+1),r=r.substring(0,a),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var a,o,s,u=n.xdRegExp.exec(e);return!u||(a=u[2],o=u[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==t||o&&o.toLowerCase()!==r.toLowerCase()||(s||o)&&s!==i))},finishLoad:function(e,t,r,i){r=t?n.strip(r):r,m.isBuild&&(f[e]=r),i(r)},load:function(e,t,r,i){if(i&&i.isBuild&&!i.inlineText)r();else{m.isBuild=i&&i.isBuild;var a=n.parseName(e),o=a.moduleName+(a.ext?"."+a.ext:""),s=t.toUrl(o),u=m.useXhr||n.useXhr;0!==s.indexOf("empty:")?!c||u(s,p,h,d)?n.get(s,function(t){n.finishLoad(e,a.strip,t,r)},function(e){r.error&&r.error(e)}):t([o],function(e){n.finishLoad(a.moduleName+"."+a.ext,a.strip,e,r)}):r()}},write:function(e,t,r,i){if(f.hasOwnProperty(t)){var a=n.jsEscape(f[t]);r.asModule(e+"!"+t,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,t,r,i,a){var o=n.parseName(t),s=o.ext?"."+o.ext:"",u=o.moduleName+s,l=r.toUrl(o.moduleName+s)+".js";n.load(u,r,function(t){var r=function(e){return i(l,e)};r.asModule=function(e,t){return i.asModule(e,l,t)},n.write(e,u,r,a)},a)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(r=t.nodeRequire("fs"),n.get=function(e,t,n){try{var i=r.readFileSync(e,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),t(i)}catch(e){n&&n(e)}}):"xhr"===m.env||!m.env&&n.createXhr()?n.get=function(e,t,r,i){var a,o=n.createXhr();if(o.open("GET",e,!0),i)for(a in i)i.hasOwnProperty(a)&&o.setRequestHeader(a.toLowerCase(),i[a]);m.onXhr&&m.onXhr(o,e),o.onreadystatechange=function(n){var i,a;4===o.readyState&&((i=o.status||0)>399&&i<600?((a=new Error(e+" HTTP status: "+i)).xhr=o,r&&r(a)):t(o.responseText),m.onXhrComplete&&m.onXhrComplete(o,e))},o.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(e,t){var n,r,i=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(r=o.readLine())&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=o.readLine());)n.append(a),n.append(r);s=String(n.toString())}finally{o.close()}t(s)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,n.get=function(e,t){var n,r,s,u={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{(n=i["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream)).init(s,1,0,!1),(r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream)).init(n,"utf-8",n.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),u),r.close(),n.close(),t(u.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),n}),n("text!REPOSITORY/package.json",[],function(){return'{\r\n  "name": "utterance-queue",\r\n  "version": "0.0.0",\r\n  "license": "MIT",\r\n  "repository": {\r\n    "type": "git",\r\n    "url": "https://github.com/phetsims/utternace-queue.git"\r\n  },\r\n  "devDependencies": {\r\n    "grunt": "~1.0.0"\r\n  },\r\n  "phet": {\r\n    "generatedUnitTests": true,\r\n    "requirejsNamespace": "UTTERANCE_QUEUE",\r\n    "buildStandalone": true,\r\n    "requiresLodash": true,\r\n    "assignGlobals": {\r\n      "phet.utteranceQueue": "UTTERANCE_QUEUE/main",\r\n      "phet.phetCore": "PHET_CORE/main",\r\n      "phet.axon": "AXON/main"\r\n    }\r\n  },\r\n  "eslintConfig": {\r\n    "extends": "../chipper/eslint/sim_eslintrc.js"\r\n  }\r\n}'}),n("TANDEM/Tandem",["require","PHET_CORE/arrayRemove","PHET_CORE/merge","TANDEM/tandemNamespace","text!REPOSITORY/package.json"],function(e){"use strict";var t=e("PHET_CORE/arrayRemove"),n=e("PHET_CORE/merge"),r=e("TANDEM/tandemNamespace"),i=e("text!REPOSITORY/package.json"),a=JSON.parse(i),o=_.hasIn(window,"phet.phetio"),s=o&&phet.phetio.queryParameters.phetioPrintMissingTandems,u=o&&phet.phetio.queryParameters.phetioValidateTandems,l={required:[],optional:[]},c=[],p=!1,h=[],d=function(){function e(t,r,i){_classCallCheck(this,e),this.parentTandem=t,this.name=r,this.phetioID=this.parentTandem?phetio.PhetioIDUtils.append(this.parentTandem.phetioID,this.name):this.name,i=n({required:!0,supplied:!0},i),this.required=i.required,this.supplied=i.supplied}return _createClass(e,[{key:"getTermRegex",value:function(){return/^[a-zA-Z0-9~]+$/}},{key:"addPhetioObject",value:function(t){if(o){if(e.errorOnFailedValidation(),s&&this.required&&!this.supplied)return void l.required.push({phetioID:this.phetioID,stack:(new Error).stack});if(!this.required&&!this.supplied){if(s){var n=(new Error).stack;if(-1===n.indexOf("Font"))return void l.optional.push({phetioID:this.phetioID,stack:n})}return}if(p)for(var r=0;r<c.length;r++)c[r].addPhetioObject(t);else h.push(t)}}},{key:"removePhetioObject",value:function(e){if((this.required||this.supplied)&&o)if(p)for(var n=0;n<c.length;n++)c[n].removePhetioObject(e);else t(h,e)}},{key:"getExtendedOptions",value:function(e){return n({supplied:this.supplied,required:this.required},e)}},{key:"createTandem",value:function(t,n){return new e(this,t,this.getExtendedOptions(n))}},{key:"getConcretePhetioID",value:function(){return this.parentTandem?phetio.PhetioIDUtils.append(this.parentTandem.getConcretePhetioID(),this.name):this.phetioID}},{key:"createGroupTandem",value:function(e){return new f(this,e)}}],[{key:"addPhetioObjectListener",value:function(e){c.push(e)}},{key:"launch",value:function(){for(p=!0;h.length>0;){var e=h.shift();e.tandem.addPhetioObject(e)}}},{key:"errorOnFailedValidation",value:function(){return u&&!s}},{key:"createFromPhetioID",value:function(t){return t.split(".").reduce(function(t,n){return"string"==typeof t&&(t=new e(null,t)),t.createTandem(n)})}}]),e}();d.ROOT=new d(null,_.camelCase(a.name)),d.GENERAL=d.ROOT.createTandem(phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME),d.GLOBAL=d.ROOT.createTandem(phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME),d.GLOBAL_MODEL=d.GLOBAL.createTandem("model"),d.GLOBAL_VIEW=d.GLOBAL.createTandem("view"),d.OPTIONAL=d.ROOT.createTandem("optionalTandem",{required:!1,supplied:!1}),d.OPT_OUT=d.OPTIONAL,d.REQUIRED=d.ROOT.createTandem("requiredTandem",{required:u||s,supplied:!1}),d.missingTandems=l,d.PHET_IO_ENABLED=o;var f=function(e){function t(e,n){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.groupMemberIndex=0,r}return _inherits(t,d),_createClass(t,[{key:"createNextTandem",value:function(){return d.createFromPhetioID(this.phetioID+"~"+this.groupMemberIndex++)}}]),t}();return r.register("Tandem",d)}),n("ifphetio",["require"],function(e){"use strict";var t={};return{load:function(n,r,i,a){if(a.isBuild){var o=r.toUrl(n);!1===/\.js$/.test(o)&&(o+=".js"),global.phet&&global.phet.chipper&&"phet-io"===global.phet.chipper.brand?(t[n]={content:global.phet.chipper.grunt.file.read(o),attach:e.attach},r([n],i)):i()}else{"phet-io"===(window.phet&&window.phet.chipper&&window.phet.chipper.brand)?r([n],i):i(function(){})}},write:function(e,n,r){var i=null;global.phet&&global.phet.chipper&&"phet-io"===global.phet.chipper.brand?(i='define("'+n+'", function(){'+t[n].content+"});",r.asModule(n,i,t[n].content)):r(i='define("'+n+'", function(){return function(){ return function(){}; };});')}}}),n("PHET_IO/dataStream",function(){return function(){return function(){}}}),n("TANDEM/PhetioObject",["require","PHET_CORE/assertMutuallyExclusiveOptions","TANDEM/EventType","PHET_CORE/inherit","TANDEM/LinkedElementIO","PHET_CORE/merge","TANDEM/types/ObjectIO","TANDEM/phetioAPIValidation","TANDEM/Tandem","TANDEM/tandemNamespace","AXON/validate","ifphetio!PHET_IO/dataStream"],function(e){"use strict";function t(e){this.tandem=null,this.phetioType=null,this.phetioState=null,this.phetioReadOnly=null,this.phetioDocumentation=null,this.phetioWrapper=null,this.phetioObjectInitialized=!1,this.phetioMessageStack=[],this.isDisposed=!1,this.phetioEventType=null,this.phetioHighFrequency=null,this.phetioPlayback=null,this.phetioStudioControl=null,this.phetioDynamicElement=null,this.phetioIsArchetype=null,this.phetioFeatured=!1,this.phetioEventMetadata=null,this.phetioComponentOptions=null,this.phetioBaselineMetadata=null,this.phetioArchetypePhetioID=null,this.linkedElements=[],e&&this.initializePhetioObject({},e)}e("PHET_CORE/assertMutuallyExclusiveOptions");var n=e("TANDEM/EventType"),r=e("PHET_CORE/inherit"),i=e("TANDEM/LinkedElementIO"),a=e("PHET_CORE/merge"),o=e("TANDEM/types/ObjectIO"),s=e("TANDEM/phetioAPIValidation"),u=e("TANDEM/Tandem"),l=e("TANDEM/tandemNamespace"),c=e("AXON/validate"),p=e("ifphetio!PHET_IO/dataStream"),h=u.PHET_IO_ENABLED,d={isValidValue:o.isIOType},f={valueType:"boolean"},m={valueType:"string",isValidValue:function(e){return-1===e.indexOf("\n")}},y={valueType:n},E={isValidValue:function(e){return _.every(_.keys(e),function(e){return g.indexOf(e)>=0})}},v={valueType:[Object,null]},O={},T={tandem:u.OPTIONAL,phetioType:o,phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:n.MODEL,phetioHighFrequency:!1,phetioPlayback:!1,phetioStudioControl:!0,phetioComponentOptions:null,phetioFeatured:!1,phetioEventMetadata:null,phetioDynamicElement:!1},g=_.keys(T).concat(["visibleProperty","pickableProperty","opacityProperty","textProperty"]),A=_.keys(T),b=function(e){return e.phetioDynamicElement},P=function(e){return e.phetioIsArchetype};l.register("PhetioObject",t);r(Object,t,{initializePhetioObject:function(e,n){if(function(e){for(var t in e)if(e.hasOwnProperty(t)&&A.indexOf(t)>=0)return!0;return!1}(n)){if(c(n.tandem,{valueType:u}),n=a({},T,e,n),c(n.phetioType,d),c(n.phetioState,f),c(n.phetioReadOnly,f),c(n.phetioEventType,y),c(n.phetioDocumentation,m),c(n.phetioHighFrequency,f),c(n.phetioPlayback,f),c(n.phetioStudioControl,f),c(n.phetioComponentOptions,E),c(n.phetioFeatured,f),c(n.phetioEventMetadata,v),c(n.phetioDynamicElement,f),this.phetioIsArchetype=!(!_.hasIn(window,"phet.phetIo.phetioEngine")||!phet.phetIo.phetioEngine.ancestorMatches(n.tandem.phetioID,P)),h&&n.tandem.supplied&&((phet.phetio.queryParameters.phetioPrintPhetioFiles||s.enabled)&&(this.phetioBaselineMetadata=t.getMetadata(a({phetioIsArchetype:this.phetioIsArchetype},n))),-1===n.tandem.phetioID.indexOf("~"))){var r=n.tandem.getConcretePhetioID();if(window.phet.phetio.phetioElementsOverrides){var i=window.phet.phetio.phetioElementsOverrides[r];i&&(n=a(n,i))}}this.tandem=n.tandem,this.phetioType=n.phetioType,this.phetioState=n.phetioState,this.phetioReadOnly=n.phetioReadOnly,this.phetioEventType=n.phetioEventType,this.phetioDocumentation=n.phetioDocumentation,this.phetioHighFrequency=n.phetioHighFrequency,this.phetioPlayback=n.phetioPlayback,this.phetioStudioControl=n.phetioStudioControl,this.phetioComponentOptions=n.phetioComponentOptions||O,this.phetioFeatured=n.phetioFeatured,this.phetioEventMetadata=n.phetioEventMetadata,this.setPhetioDynamicElement(n.phetioDynamicElement||!(!_.hasIn(window,"phet.phetIo.phetioEngine")||!phet.phetIo.phetioEngine.ancestorMatches(this.tandem.phetioID,b))),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement),this.phetioPlayback&&(this.phetioEventMetadata=this.phetioEventMetadata||{},this.phetioEventMetadata.playback=!0),h&&this.isPhetioInstrumented()&&(this.phetioWrapper=new this.phetioType(this,this.tandem.phetioID),n.phetioDynamicElement&&this.propagateDynamicFlagsToChildren()),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}},phetioStartEvent:function(e,t){if(h&&this.isPhetioInstrumented()){if(t=a({data:null,getData:null},t),this.phetioHighFrequency&&_.hasIn(window,"phet.phetio.queryParameters")&&!window.phet.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!p.isEmittingLowFrequencyEvent())return void this.phetioMessageStack.push(-1);var n=t.getData?t.getData():t.data;this.phetioMessageStack.push(p.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,n,this.phetioEventMetadata,this.phetioHighFrequency))}},phetioEndEvent:function(){if(h&&this.isPhetioInstrumented()){var e=this.phetioMessageStack.pop();if(-1===e)return;p.end(e)}},propagateDynamicFlagsToChildren:function(){for(var e=phet.phetIo.phetioEngine.getChildren(this),t=0;t<e.length;t++){var n=e[t];n.phetioIsArchetype=this.phetioIsArchetype,n.setPhetioDynamicElement(this.phetioDynamicElement),n.phetioBaselineMetadata&&(n.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}},setPhetioDynamicElement:function(e){this.phetioIsArchetype?this.phetioDynamicElement=!1:this.phetioDynamicElement=e,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement),this.phetioArchetypePhetioID=e?this.tandem.getConcretePhetioID():null},markDynamicElementArchetype:function(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),u.PHET_IO_ENABLED&&this.propagateDynamicFlagsToChildren()},isPhetioInstrumented:function(){return this.tandem&&this.tandem.supplied},addLinkedElement:function(e,t){h&&this.isPhetioInstrumented()&&e.isPhetioInstrumented()&&this.linkedElements.push(new N(e,t))},onSimulationConstructionCompleted:function(){this.phetioBaselineMetadata=null},dispose:function(){this.phetioObjectInitialized&&(this.tandem.removePhetioObject(this),this.phetioWrapper&&this.phetioWrapper.dispose&&this.phetioWrapper.dispose()),this.linkedElements.forEach(function(e){return e.dispose()}),this.linkedElements.length=0,this.isDisposed=!0}},{mergePhetioComponentOptions:function(e,t){t.phetioComponentOptions=_.merge(e,t.phetioComponentOptions)},getMetadata:function(e){var t={phetioTypeName:e.phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:n.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioStudioControl:e.phetioStudioControl,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t},DEFAULT_OPTIONS:T});var N=function(e){function n(e,t){_classCallCheck(this,n),(t=a({phetioType:i},t)).phetioReadOnly=!0,t.phetioFeatured=e.phetioFeatured;var r=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.element=e,r}return _inherits(n,t),n}();return t}),n("AXON/TinyEmitter",["require","AXON/axon"],function(e){"use strict";var t=e("AXON/axon"),n=(_.hasIn(window,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.shuffleListeners,function(){function e(){_classCallCheck(this,e),this.listeners=[],this.activeListenersStack=[]}return _createClass(e,[{key:"dispose",value:function(){this.listeners.length=0}},{key:"emit",value:function(){if(this.listeners.length>0){this.activeListenersStack.push(this.listeners);for(var e=this.activeListenersStack.length-1,t=0;t<this.activeListenersStack[e].length;t++)this.activeListenersStack[e][t].apply(null,arguments);this.activeListenersStack.pop()}}},{key:"addListener",value:function(e){this.defendListeners(),this.listeners.push(e)}},{key:"removeListener",value:function(e){var t=this.listeners.indexOf(e);this.defendListeners(),this.listeners.splice(t,1)}},{key:"removeAllListeners",value:function(){for(;this.listeners.length>0;)this.removeListener(this.listeners[0])}},{key:"defendListeners",value:function(){for(var e=this.activeListenersStack.length-1;e>=0&&!this.activeListenersStack[e].defended;e--){var t=this.listeners.slice();t.defended=!0,this.activeListenersStack[e]=t}}},{key:"hasListener",value:function(e){return this.listeners.indexOf(e)>=0}},{key:"hasListeners",value:function(){return this.listeners.length>0}},{key:"getListenerCount",value:function(){return this.listeners.length}}]),e}());return t.register("TinyEmitter",n)}),n("AXON/units",["require","AXON/axon"],function(e){"use strict";var t={values:["AMU","atm","cm","°","°C","K","kg","kg/m^3","kPa","m","mm","m/s","m/s^2","nm","nm/ps","particles/ps","pm","pm/ps","ps","s","N","radians","amperes","milliamperes","becquerels","centimeters","centimeters-squared","coulombs","degrees Celsius","degrees","farads","kilograms","grams","gray","henrys","henries","hertz","joules","katals","kelvins","liters","liters/second","lumens","lux","meters","meters/second","meters/second/second","moles","moles/liter","nanometers","newtons/meters","newtons-second/meters","ohms","ohm-centimeters","pascals","percent","radians/second","seconds","siemens","sieverts","steradians","tesla","view-coordinates/second","volts","watts","webers"],isValidUnits:function(e){return _.includes(t.values,e)}};return e("AXON/axon").register("units",t),t}),n("AXON/Property",["require","AXON/axon","PHET_CORE/merge","AXON/Multilink","TANDEM/types/NullableIO","TANDEM/PhetioObject","TANDEM/Tandem","AXON/TinyEmitter","AXON/units","AXON/validate","AXON/ValidatorDef"],function(e){"use strict";var t=e("AXON/axon"),n=e("PHET_CORE/merge"),r=e("AXON/Multilink"),i=e("TANDEM/types/NullableIO"),a=e("TANDEM/PhetioObject"),o=e("TANDEM/Tandem"),s=e("AXON/TinyEmitter"),u=(e("AXON/units"),e("AXON/validate"),e("AXON/ValidatorDef")),l=0,c=function(e){function t(e,r){_classCallCheck(this,t),r=n({tandem:o.OPTIONAL,useDeepEquality:!1,units:null,reentrant:!1},r),u.containsValidatorKey(r)||(r.isValidValue=function(){return!0}),r.units&&(r.phetioEventMetadata=r.phetioEventMetadata||{},r.phetioEventMetadata.units=r.units);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));i.id=l++,i.units=r.units,i.useDeepEquality=r.useDeepEquality,o.errorOnFailedValidation()&&i.isPhetioInstrumented(),i._value=e,i._initialValue=e,i.validValues=r.validValues,i.changedEmitter=new s,i.notifying=!1,i.reentrant=r.reentrant,i.isDeferred=!1,i.deferredValue=null,i.hasDeferredValue=!1,i.validate=null;return i}return _inherits(t,a),_createClass(t,[{key:"get",value:function(){return this._value}},{key:"set",value:function(e){if(!this.isDisposed)if(this.validate&&this.validate(e),this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){var t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}return this}},{key:"setPropertyValue",value:function(e){this._value=e}},{key:"setInitialValue",value:function(e){this._initialValue=e}},{key:"equalsValue",value:function(e){return this.areValuesEqual(e,this._value)}},{key:"areValuesEqual",value:function(e,t){return this.useDeepEquality&&e&&t&&e.constructor===t.constructor?e.equals(t):e===t}},{key:"getInitialValue",value:function(){return this._initialValue}},{key:"_notifyListeners",value:function(e){var n=this;this.isPhetioInstrumented()&&this.phetioStartEvent(t.CHANGED_EVENT_NAME,{getData:function(){var t=n.phetioType.parameterTypes[0];return{oldValue:i(t).toStateObject(e),newValue:t.toStateObject(n.get())}}}),this.notifying=!0,this.changedEmitter.emit(this.get(),e,this),this.notifying=!1,this.isPhetioInstrumented()&&this.phetioEndEvent()}},{key:"notifyListenersStatic",value:function(){this._notifyListeners(null)}},{key:"setDeferred",value:function(e){var t=this;if(e)this.isDeferred=!0;else{this.isDeferred=!1;var n=this._value;if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1),!this.equalsValue(n))return function(){return!t.isDisposed&&t._notifyListeners(n)}}return null}},{key:"reset",value:function(){this.set(this._initialValue)}},{key:"link",value:function(e){this.changedEmitter.addListener(e),e(this.get(),null,this)}},{key:"lazyLink",value:function(e){this.changedEmitter.addListener(e)}},{key:"unlink",value:function(e){this.changedEmitter.removeListener(e)}},{key:"unlinkAll",value:function(){this.changedEmitter.removeAllListeners()}},{key:"linkAttribute",value:function(e,t){var n=function(n){e[t]=n};return this.link(n),n}},{key:"unlinkAttribute",value:function(e){this.unlink(e)}},{key:"toString",value:function(){return"Property#"+this.id+"{"+this.get()+"}"}},{key:"valueOf",value:function(){return this.toString()}},{key:"debug",value:function(e){var t=function(t){return console.log(e,t)};return this.link(t),t}},{key:"toggle",value:function(){this.value=!this.value}},{key:"dispose",value:function(){this.unlinkAll(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.changedEmitter.dispose()}},{key:"hasListener",value:function(e){return this.changedEmitter.hasListener(e)}},{key:"hasListeners",value:function(){return this.changedEmitter.hasListeners()}},{key:"initialValue",get:function(){return this.getInitialValue()}},{key:"value",get:function(){return this.get()},set:function(e){this.set(e)}}],[{key:"multilink",value:function(e,t){return new r(e,t,!1)}},{key:"lazyMultilink",value:function(e,t){return new r(e,t,!0)}},{key:"unmultilink",value:function(e){e.dispose()}}]),t}();return c.CHANGED_EVENT_NAME="changed",t.register("Property",c)}),n("TANDEM/types/FunctionIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/types/ObjectIO"),n={},r=function(e,n){var r=n.map(function(e){return e.typeName}).join(","),i=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,t),n}(),a=n.map(function(e){return e.typeName}).join(", ");return""===a&&(a="VoidIO"),i.documentation="Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> "+a+"<br><strong>Return Type:</strong> "+e.typeName,i.validator={valueType:"function"},i.returnType=e,i.functionParameterTypes=n,i.wrapForPhetioCommandProcessor=!0,i.typeName="FunctionIO("+r+")=>"+e.typeName,i.parameterTypes=n.concat([e]),t.validateSubtype(i),i};return e("TANDEM/tandemNamespace").register("FunctionIO",function(e,t){for(var i=0;i<t.length;i++);var a=e.typeName+"."+t.map(function(e){return e.typeName}).join(",");return n.hasOwnProperty(a)||(n[a]=r(e,t)),n[a]})}),n("TANDEM/types/VoidIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/types/ObjectIO"),n=e("TANDEM/tandemNamespace"),r=function(e){function n(e,t){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return _inherits(n,t),_createClass(n,null,[{key:"toStateObject",value:function(){}}]),n}();return r.documentation="Type for which there is no instance, usually to mark functions without a return value",r.validator={isValidValue:function(){return!0}},r.typeName="VoidIO",t.validateSubtype(r),n.register("VoidIO",r)}),n("AXON/PropertyIO",["require","AXON/axon","TANDEM/types/FunctionIO","TANDEM/types/NullableIO","TANDEM/types/ObjectIO","AXON/Property","AXON/validate","TANDEM/types/VoidIO"],function(e){"use strict";var t=e("AXON/axon"),n=e("TANDEM/types/FunctionIO"),r=e("TANDEM/types/NullableIO"),i=e("TANDEM/types/ObjectIO"),a=e("AXON/Property"),o=e("AXON/validate"),s=e("TANDEM/types/VoidIO"),u={},l=function(e){var t=function(t){function n(e,t){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return _inherits(n,i),_createClass(n,null,[{key:"toStateObject",value:function(t){o(t,this.validator);var n={value:e.toStateObject(t.value)};return t.validValues&&(n.validValues=t.validValues.map(function(t){return e.toStateObject(t)})),t.units&&(n.units=t.units),n}},{key:"fromStateObject",value:function(t){return{units:t.units,value:e.fromStateObject(t.value),validValues:t.validValues&&t.validValues.map(function(t){return e.fromStateObject(t)})}}},{key:"setValue",value:function(e,t){o(e,this.validator),e.units=t.units,e.set(t.value),e.validValues=t.validValues,e.setInitialValue(t.value)}}]),n}();return t.methods={getValue:{returnType:e,parameterTypes:[],implementation:function(){return this.phetioObject.get()},documentation:"Gets the current value."},setValue:{returnType:s,parameterTypes:[e],implementation:function(e){this.phetioObject.set(e)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:s,parameterTypes:[n(s,[e,r(e)])],implementation:function(e){this.phetioObject.link(e)},documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:s,parameterTypes:[n(s,[e,r(e)])],implementation:function(e){this.phetioObject.lazyLink(e)},documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'}},t.documentation="Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",t.methodOrder=["link","lazyLink"],t.validator={valueType:a},t.events=["changed"],t.typeName="PropertyIO<"+e.typeName+">",t.parameterTypes=[e],i.validateSubtype(t),t};return t.register("PropertyIO",function(e){return u.hasOwnProperty(e.typeName)||(u[e.typeName]=l(e)),u[e.typeName]})}),n("AXON/BooleanProperty",["require","AXON/axon","TANDEM/types/BooleanIO","PHET_CORE/merge","AXON/Property","AXON/PropertyIO"],function(e){"use strict";var t=e("AXON/axon"),n=e("TANDEM/types/BooleanIO"),r=e("PHET_CORE/merge"),i=e("AXON/Property"),a=e("AXON/PropertyIO")(n),o=function(e){function t(e,n){return _classCallCheck(this,t),n=r({valueType:"boolean",phetioType:a},n),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return _inherits(t,i),t}();return t.register("BooleanProperty",o)}),n("AXON/DerivedPropertyIO",["require","AXON/axon","TANDEM/types/ObjectIO","AXON/PropertyIO","TANDEM/types/VoidIO"],function(e){"use strict";function t(e){return s.hasOwnProperty(e.typeName)||(s[e.typeName]=u(e)),s[e.typeName]}var n=e("AXON/axon"),r=e("TANDEM/types/ObjectIO"),i=e("AXON/PropertyIO"),a=e("TANDEM/types/VoidIO"),o={isValidValue:function(e){return e instanceof(window.phet?phet.axon.DerivedProperty:n.DerivedProperty)}},s={},u=function(e){var n=i(e),s=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();return s.methods={setValue:{returnType:a,parameterTypes:[e],implementation:function(e){return this.phetioObject.set(e)},documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}},s.documentation="Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",s.validator=o,s.typeName="DerivedPropertyIO<"+e.typeName+">",s.outerType=t,r.validateSubtype(s),s};return n.register("DerivedPropertyIO",t)}),n("AXON/DerivedProperty",["require","AXON/axon","AXON/DerivedPropertyIO","PHET_CORE/merge","AXON/Property","TANDEM/Tandem"],function(e){"use strict";var t=e("AXON/axon"),n=(e("AXON/DerivedPropertyIO"),e("PHET_CORE/merge")),r=e("AXON/Property"),i=e("TANDEM/Tandem"),a=function(e){function t(e,r,a){_classCallCheck(this,t),a=n({tandem:i.OPTIONAL,phetioReadOnly:!0},a);var o=r.apply(null,e.map(function(e){return e.get()})),s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,a));s.dependencies=e,s._initialValue=null,s.isPhetioInstrumented();var u=s;s.dependencyListeners=[];for(var l=0;l<e.length;l++){!function(n){var i=function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",s).call(s,r.apply(null,e.map(function(e){return e.get()})))};u.dependencyListeners.push(i),n.lazyLink(i)}(e[l])}return s}return _inherits(t,r),_createClass(t,[{key:"dispose",value:function(){for(var e=0;e<this.dependencies.length;e++){var n=this.dependencies[e];n.isDisposed||n.unlink(this.dependencyListeners[e])}this.dependencies=null,this.dependencyListeners=null,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}},{key:"set",value:function(e){throw new Error("Cannot set values directly to a DerivedProperty, tried to set: "+e)}},{key:"reset",value:function(){throw new Error("Cannot reset a DerivedProperty directly")}},{key:"getInitialValue",value:function(){throw new Error("Cannot get the initial value of a DerivedProperty")}},{key:"value",set:function(e){throw new Error("Cannot es5-set values directly to a DerivedProperty, tried to set: "+e)},get:function(){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this)}}],[{key:"valueEquals",value:function(e,n,r){return new t([e,n],o,r)}},{key:"and",value:function(e,n){return new t(e,_.reduce.bind(null,e,s,!0),n)}},{key:"or",value:function(e,n){return new t(e,_.reduce.bind(null,e,u,!1),n)}}]),t}(),o=function(e,t){return e===t},s=function(e,t){return e&&t.value},u=function(e,t){return e||t.value};return t.register("DerivedProperty",a)}),n("AXON/DynamicProperty",["require","AXON/axon","PHET_CORE/merge","AXON/Property"],function(e){"use strict";var t=e("AXON/axon"),n=e("PHET_CORE/merge"),r=e("AXON/Property"),i=function(e){function t(e,r){_classCallCheck(this,t);var i="string"==typeof(r=n({bidirectional:!1,defaultValue:null,derive:_.identity,map:_.identity,inverseMap:_.identity},r)).derive?_.property(r.derive):r.derive,a="string"==typeof r.map?_.property(r.map):r.map,o=a(null===e.value?r.defaultValue:i(e.value).value),s=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return s.defaultValue=r.defaultValue,s.derive=i,s.map=a,s.inverseMap="string"==typeof r.inverseMap?_.property(r.inverseMap):r.inverseMap,s.bidirectional=r.bidirectional,s.valuePropertyProperty=e,s.isExternallyChanging=!1,s.bidirectional||(s._initialValue=null),s.propertyPropertyListener=s.onPropertyPropertyChange.bind(s),s.propertyListener=s.onPropertyChange.bind(s),e.link(s.propertyListener),r.bidirectional&&s.lazyLink(s.onSelfChange.bind(s)),s}return _inherits(t,r),_createClass(t,[{key:"onPropertyPropertyChange",value:function(e,n,r){if(this.bidirectional&&null!==this.valuePropertyProperty.value&&r){if(this.derive(this.valuePropertyProperty.value)===r&&r.equalsValue(this.inverseMap(this.value)))return}_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,this.map(e))}},{key:"onPropertyChange",value:function(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}},{key:"onSelfChange",value:function(e){if(null!==this.valuePropertyProperty.value){var t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}},{key:"dispose",value:function(){this.valuePropertyProperty.unlink(this.propertyListener),null!==this.valuePropertyProperty.value&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}},{key:"reset",value:function(){null!==this.valuePropertyProperty.value&&this.derive(this.valuePropertyProperty.value).reset()}},{key:"getInitialValue",value:function(){return _get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getInitialValue",this).call(this)}},{key:"set",value:function(e){this.isExternallyChanging=!0,_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e),this.isExternallyChanging=!1}}]),t}();return t.register("DynamicProperty",i)}),n("AXON/ActionIO",["require","AXON/axon","TANDEM/types/ObjectIO","TANDEM/types/VoidIO"],function(e){"use strict";var t=e("AXON/axon"),n=e("TANDEM/types/ObjectIO"),r=e("TANDEM/types/VoidIO"),i={isValidValue:function(e){return e instanceof(window.phet?phet.axon.Action:t.Action)}},a=function(e){return e.typeName},o={},s=function(e){var t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();return t.methods={execute:{returnType:r,parameterTypes:e,implementation:function(){this.phetioObject.execute.apply(this.phetioObject,arguments)},documentation:"Executes the function the Action is wrapping.",invocableForReadOnlyElements:!1}},t.documentation="Executes when an event occurs.",t.events=["emitted"],t.validator=i,t.typeName="ActionIO<"+e.map(a).join(", ")+">",t.parameterTypes=e,n.validateSubtype(t),t};return t.register("ActionIO",function(e){var t=e.map(a).join(",");return o.hasOwnProperty(t)||(o[t]=s(e)),o[t]})}),n("AXON/Action",["require","AXON/ActionIO","PHET_CORE/assertMutuallyExclusiveOptions","AXON/axon","PHET_CORE/merge","TANDEM/PhetioObject","TANDEM/Tandem","AXON/validate","AXON/ValidatorDef"],function(e){"use strict";var t=e("AXON/ActionIO"),n=(e("PHET_CORE/assertMutuallyExclusiveOptions"),e("AXON/axon")),r=e("PHET_CORE/merge"),i=e("TANDEM/PhetioObject"),a=e("TANDEM/Tandem"),o=e("AXON/validate"),s=e("AXON/ValidatorDef"),u=[],l=(["name","phetioType","phetioDocumentation","phetioPrivate"].concat(s.VALIDATOR_KEYS),function(e){return e.phetioType}),c=function(e){return e.name},p=function(e){function n(e,o){_classCallCheck(this,n);var s=(o=r({parameters:u,tandem:a.OPTIONAL,phetioOuterType:t,phetioState:!1,phetioPlayback:i.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:i.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:"A function that executes."},o)).parameters.filter(l);o.phetioType=o.phetioOuterType(s.map(l)),o.phetioPlayback&&(o.phetioEventMetadata=o.phetioEventMetadata||{},o.phetioEventMetadata.dataKeys=o.parameters.map(c)),o.phetioDocumentation=n.getPhetioDocumentation(o.phetioDocumentation,s);var p=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o));return p._parameters=o.parameters,p._action=e,p._phetioOuterType=o.phetioOuterType,p}return _inherits(n,i),_createClass(n,[{key:"getPhetioData",value:function(){var e=null;if(this._parameters.length>0){e={};for(var t=0;t<this._parameters.length;t++){var n=this._parameters[t];n.phetioPrivate||(e[n.name]=n.phetioType.toStateObject(arguments[t]))}}return e}},{key:"dispose",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"execute",value:function(){this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData.apply(this,arguments)}),this._action.apply(null,arguments),this.isPhetioInstrumented()&&this.phetioEndEvent()}}],[{key:"validateParameters",value:function(e,t){o(e,{valueType:Array});for(var n=!1,r=0;r<e.length;r++){var i=e[r];n=n||i.phetioPrivate;for(var a in i);s.validateValidator(i)}}},{key:"getPhetioDocumentation",value:function(e,t){return e+(0===t.length?" No arguments.":" The arguments are:<br/><ol>"+t.map(function(e){var t=e.phetioDocumentation&&!_.endsWith(e.phetioDocumentation,".")?". "+e.phetioDocumentation:"";return"<li>"+e.name+": "+e.phetioType.typeName+t+"</li>"}).join("<br/>")+"</ol>")}}]),n}();return n.register("Action",p)}),n("AXON/EmitterIO",["require","AXON/ActionIO","AXON/axon","TANDEM/types/FunctionIO","TANDEM/types/ObjectIO","TANDEM/types/VoidIO"],function(e){"use strict";var t=e("AXON/ActionIO"),n=e("AXON/axon"),r=e("TANDEM/types/FunctionIO"),i=e("TANDEM/types/ObjectIO"),a=e("TANDEM/types/VoidIO"),o={isValidValue:function(e){return e instanceof(window.phet?phet.axon.Emitter:n.Emitter)}},s={},u=function(e){var n=function(n){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return _inherits(r,t(e)),r}();return n.methods={addListener:{returnType:a,parameterTypes:[r(a,e)],implementation:function(e){this.phetioObject.addListener(e)},documentation:"Adds a listener which will be called when the emitter emits."},emit:{returnType:a,parameterTypes:e,implementation:function(){this.phetioObject.emit.apply(this.phetioObject,arguments)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1}},n.documentation="Emits when an event occurs and calls added listeners.",n.parameterTypes=e,n.validator=o,n.typeName="EmitterIO<"+e.map(function(e){return e.typeName}).join(", ")+">",i.validateSubtype(n),n};return n.register("EmitterIO",function(e){var t=e.map(function(e){return e.typeName}).join(",");return s.hasOwnProperty(t)||(s[t]=u(e)),s[t]})}),n("AXON/Emitter",["require","AXON/Action","AXON/axon","AXON/EmitterIO","PHET_CORE/merge","AXON/TinyEmitter"],function(e){"use strict";var t=e("AXON/Action"),n=e("AXON/axon"),r=e("AXON/EmitterIO"),i=e("PHET_CORE/merge"),a=e("AXON/TinyEmitter"),o=function(e){function n(e){_classCallCheck(this,n),e=i({phetioOuterType:r},e);var t=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,function(){o.tinyEmitter.emit.apply(o.tinyEmitter,arguments)},e)),o=t;return t.tinyEmitter=new a,t}return _inherits(n,t),_createClass(n,[{key:"execute",value:function(){}},{key:"emit",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"execute",this).apply(this,arguments)}},{key:"dispose",value:function(){this.tinyEmitter.dispose(),_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addListener",value:function(e){this.tinyEmitter.addListener(e)}},{key:"removeListener",value:function(e){this.tinyEmitter.removeListener(e)}},{key:"removeAllListeners",value:function(){this.tinyEmitter.removeAllListeners()}},{key:"hasListener",value:function(e){return this.tinyEmitter.hasListener(e)}},{key:"hasListeners",value:function(){return this.tinyEmitter.hasListeners()}},{key:"getListenerCount",value:function(){return this.tinyEmitter.getListenerCount()}}]),n}();return n.register("Emitter",o)}),n("PHET_CORE/cleanArray",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){if(e){for(;e.length;)e.pop();return e}return[]}return e("PHET_CORE/phetCore").register("cleanArray",t),t}),n("AXON/Events",["require","AXON/axon","PHET_CORE/cleanArray"],function(e){"use strict";function t(){this._eventListeners={},this._staticEventListeners={}}var n=e("AXON/axon"),r=e("PHET_CORE/cleanArray");return n.register("Events",t),t.prototype={dispose:function(){this.removeAllEventListeners()},on:function(e,t){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(t)},onStatic:function(e,t){this._staticEventListeners[e]=this._staticEventListeners[e]||[],this._staticEventListeners[e].push(t)},off:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=this._eventListeners[e].indexOf(t);this._eventListeners[e].splice(n,1)},offStatic:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=this._staticEventListeners[e].indexOf(t);this._staticEventListeners[e].splice(n,1)},hasListener:function(e,t){var n=this._eventListeners[e];return!!n&&n.indexOf(t)>=0},hasStaticListener:function(e,t){var n=this._staticEventListeners[e];return!!n&&n.indexOf(t)>=0},removeAllEventListeners:function(){var e=void 0;for(e in this._eventListeners)r(this._eventListeners[e]);for(e in this._staticEventListeners)r(this._staticEventListeners[e])},trigger:function(e){var t=this._eventListeners[e],n=this._staticEventListeners[e],r=t?t.length:0,i=n?n.length:0,a=void 0,o=1===arguments.length;!o&&(r>0||i>0)&&(a=Array.prototype.slice.call(arguments,1)),r>0&&(t=t.slice());var s=void 0;for(s=0;s<r;s++){var u=t[s];o?u():u.apply(this,a)}for(s=0;s<i;s++){var l=n[s];o?l(arguments):l.apply(this,a)}},trigger0:function(e){var t=this._eventListeners[e],n=this._staticEventListeners[e],r=t?t.length:0,i=n?n.length:0;r>0&&(t=t.slice());var a=void 0;for(a=0;a<r;a++)t[a]();for(a=0;a<i;a++)n[a]()},trigger1:function(e,t){var n=this._eventListeners[e],r=this._staticEventListeners[e],i=n?n.length:0,a=r?r.length:0;i>0&&(n=n.slice());var o=void 0;for(o=0;o<i;o++)n[o](t);for(o=0;o<a;o++)r[o](t)},trigger2:function(e,t,n){var r=this._eventListeners[e],i=this._staticEventListeners[e],a=r?r.length:0,o=i?i.length:0;a>0&&(r=r.slice());var s=void 0;for(s=0;s<a;s++)r[s](t,n);for(s=0;s<o;s++)i[s](t,n)}},t}),n("TANDEM/types/NumberIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/types/ObjectIO"),n=e("TANDEM/tandemNamespace"),r=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return _inherits(n,t),_createClass(n,null,[{key:"toStateObject",value:function(e){return e===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":e===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":e}},{key:"fromStateObject",value:function(e){return"POSITIVE_INFINITY"===e?Number.POSITIVE_INFINITY:"NEGATIVE_INFINITY"===e?Number.NEGATIVE_INFINITY:e}}]),n}();return r.documentation="Wrapper for the built-in JS number type (floating point, but also represents integers)",r.validator={valueType:"number"},r.typeName="NumberIO",t.validateSubtype(r),n.register("NumberIO",r)}),n("DOT/dot",["require","PHET_CORE/Namespace"],function(e){"use strict";var t=new(e("PHET_CORE/Namespace"))("dot");return t.register("v2",function(e,n){return new t.Vector2(e,n)}),t.register("v3",function(e,n,r){return new t.Vector3(e,n,r)}),t.register("v4",function(e,n,r,i){return new t.Vector4(e,n,r,i)}),t.register("FastArray",window.Float64Array?window.Float64Array:window.Array),t}),n("DOT/Range",["require","DOT/dot"],function(e){"use strict";function t(e,t){this._min=e,this._max=t}return e("DOT/dot").register("Range",t),t.prototype={constructor:t,getMin:function(){return this._min},get min(){return this.getMin()},setMin:function(e){this._min=e},set min(e){this.setMin(e)},getMax:function(){return this._max},get max(){return this.getMax()},setMax:function(e){this._max=e},set max(e){this.setMax(e)},setMinMax:function(e,t){this._min=e,this._max=t},copy:function(){return new t(this._min,this._max)},getLength:function(){return this._max-this._min},getCenter:function(){return(this._max+this._min)/2},contains:function(e){return e>=this._min&&e<=this._max},containsRange:function(e){return this._min<=e.min&&this._max>=e.max},intersects:function(e){return this._max>=e.min&&e.max>=this._min},intersectsExclusive:function(e){return this._max>e.min&&e.max>this._min},toString:function(){return"[Range (min:"+this._min+" max:"+this._max+")]"},constrainValue:function(e){return Math.min(Math.max(e,this._min),this._max)},equals:function(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max},getNormalizedValue:function(e){return(e-this.min)/this.getLength()},get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}},t}),n("DOT/RangeIO",["require","DOT/dot","TANDEM/types/ObjectIO","DOT/Range","AXON/validate"],function(e){"use strict";var t=e("DOT/dot"),n=e("TANDEM/types/ObjectIO"),r=e("DOT/Range"),i=e("AXON/validate"),a=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),_createClass(t,null,[{key:"toStateObject",value:function(e){return i(e,this.validator),{min:e.min,max:e.max}}},{key:"fromStateObject",value:function(e){return new r(e.min,e.max)}}]),t}();return a.documentation='A range with "min" and a "max" members.',a.validator={valueType:r},a.typeName="RangeIO",n.validateSubtype(a),t.register("RangeIO",a)}),n("TANDEM/types/StringIO",["require","TANDEM/types/ObjectIO","TANDEM/tandemNamespace"],function(e){"use strict";var t=e("TANDEM/types/ObjectIO"),n=e("TANDEM/tandemNamespace"),r=function(e){function n(e,t){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return _inherits(n,t),_createClass(n,null,[{key:"toStateObject",value:function(e){return e}},{key:"fromStateObject",value:function(e){return e}}]),n}();return r.documentation="Wrapper for the built-in JS string type",r.validator={valueType:"string"},r.typeName="StringIO",t.validateSubtype(r),n.register("StringIO",r)}),n("AXON/NumberPropertyIO",["require","AXON/axon","TANDEM/types/NumberIO","TANDEM/types/ObjectIO","AXON/PropertyIO","DOT/RangeIO","TANDEM/types/StringIO","AXON/validate"],function(e){"use strict";var t=e("AXON/axon"),n=e("TANDEM/types/NumberIO"),r=e("TANDEM/types/ObjectIO"),i=e("AXON/PropertyIO"),a=e("DOT/RangeIO"),o=e("TANDEM/types/StringIO"),s=e("AXON/validate"),u=i(n),l=["FloatingPoint","Integer"],c=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,u),_createClass(t,null,[{key:"toStateObject",value:function(e){s(e,this.validator);var t=u.toStateObject(e);return e.numberType&&(t.numberType=e.numberType),e.rangeProperty.value&&(t.range=a.toStateObject(e.rangeProperty.value),e.rangeProperty.isPhetioInstrumented()&&(t.rangePhetioID=o.toStateObject(e.rangeProperty.tandem.phetioID))),e.step&&(t.step=n.toStateObject(e.step)),t}},{key:"fromStateObject",value:function(e){var t=u.fromStateObject(e);return t.numberType=e.numberType,t.step=e.step,t}},{key:"setValue",value:function(e,t){s(e,this.validator),u.setValue(e,t),e.step=t.step,e.numberType=t.numberType}}]),t}();return c.validator={isValidValue:function(e){return e instanceof(window.phet?phet.axon.NumberProperty:t.NumberProperty)}},c.typeName="NumberPropertyIO",c.documentation="Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '"+l.join("' | '")+"' )",c.VALID_NUMBER_TYPES=l,r.validateSubtype(c),t.register("NumberPropertyIO",c)}),n("AXON/NumberProperty",["require","AXON/axon","PHET_CORE/merge","TANDEM/types/NullableIO","AXON/NumberPropertyIO","AXON/Property","AXON/PropertyIO","DOT/Range","DOT/RangeIO","TANDEM/Tandem","AXON/validate"],function(e){"use strict";var t=e("AXON/axon"),n=e("PHET_CORE/merge"),r=e("TANDEM/types/NullableIO"),i=e("AXON/NumberPropertyIO"),a=e("AXON/Property"),o=e("AXON/PropertyIO"),s=(e("DOT/Range"),e("DOT/RangeIO")),u=e("TANDEM/Tandem"),l=(e("AXON/validate"),i.VALID_NUMBER_TYPES,function(e){function t(e,l){_classCallCheck(this,t),(l=n({numberType:"FloatingPoint",range:null,step:null,rangePropertyOptions:{phetioDocumentation:"provides the range of possible values for the parent NumberProperty",phetioType:o(r(s)),phetioReadOnly:!0,tandem:u.OPTIONAL},tandem:u.OPTIONAL},l)).valueType="number",l.phetioType=i;var c=!(l.range&&l.range instanceof a),p=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l));p.numberType=l.numberType,p.step=l.step,p.validateNumberProperty=!1,p.rangeProperty=null,p.rangeProperty=c?new a(l.range,l.rangePropertyOptions):l.range;var h=function(e){p.validateNumberProperty&&p.validateNumberProperty(p.value)};return p.rangeProperty.link(h),l.validValues&&p.validateNumberProperty&&l.validValues.forEach(function(e){return p.validateNumberProperty(e)}),p.validateNumberProperty&&p.link(function(e){p.validateNumberProperty(e)}),p.disposeNumberProperty=function(){c?p.rangeProperty.dispose():p.rangeProperty.unlink(h)},p.resetNumberProperty=function(){c&&p.rangeProperty.reset()},p}return _inherits(t,a),_createClass(t,[{key:"reset",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this),this.resetNumberProperty()}},{key:"dispose",value:function(){this.disposeNumberProperty(),_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"setValueAndRange",value:function(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);var n=this.setDeferred(!1),r=this.rangeProperty.setDeferred(!1);n&&n(),r&&r()}},{key:"range",get:function(){return this.rangeProperty.value},set:function(e){this.rangeProperty.value=e}}]),t}());return t.register("NumberProperty",l)}),n("AXON/ObservableArrayIO",["require","AXON/axon","TANDEM/types/FunctionIO","TANDEM/types/NumberIO","TANDEM/types/ObjectIO","AXON/validate","TANDEM/types/VoidIO"],function(e){"use strict";var t=e("AXON/axon"),n=e("TANDEM/types/FunctionIO"),r=e("TANDEM/types/NumberIO"),i=e("TANDEM/types/ObjectIO"),a=e("AXON/validate"),o=e("TANDEM/types/VoidIO"),s={isValidValue:function(e){return e instanceof(window.phet?phet.axon.ObservableArray:t.ObservableArray)}},u={},l=function(e){var t=function(t){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,i),_createClass(n,null,[{key:"toStateObject",value:function(t){return a(t,this.validator),{array:t.getArray().map(function(t){return e.toStateObject(t)})}}},{key:"fromStateObject",value:function(t){return t.array.map(function(t){return e.fromStateObject(t)})}},{key:"setValue",value:function(e,t){a(e,this.validator),e.clear(),e.addAll(t)}}]),n}();return t.methods={addItemAddedListener:{returnType:o,parameterTypes:[n(o,[e])],implementation:function(e){this.phetioObject.addItemAddedListener(e)},documentation:"Add a listener that is called when an item is added to the observable array."},addItemRemovedListener:{returnType:o,parameterTypes:[n(o,[e])],implementation:function(e){this.phetioObject.addItemRemovedListener(e)},documentation:"Add a listener that is called when an item is removed from the observable array."},getLength:{returnType:r,parameterTypes:[],implementation:function(){return this.phetioObject.length},documentation:"Get the number of elements in the observable array"}},t.documentation="An array that sends notifications when its values have changed.",t.validator=s,t.events=["itemAdded","itemRemoved"],t.typeName="ObservableArrayIO<"+e.typeName+">",t.parameterTypes=[e],i.validateSubtype(t),t};return t.register("ObservableArrayIO",function(e){return u.hasOwnProperty(e.typeName)||(u[e.typeName]=l(e)),u[e.typeName]})}),n("AXON/ObservableArray",["require","AXON/axon","PHET_CORE/inherit","PHET_CORE/merge","AXON/NumberProperty","TANDEM/types/ObjectIO","AXON/ObservableArrayIO","TANDEM/PhetioObject","TANDEM/Tandem"],function(e){"use strict";function t(e){e=i({allowDuplicates:!1,phetioType:c,tandem:l.OPTIONAL},e),this.allowDuplicates=e.allowDuplicates,this._options=e,this._array=[],this._addedListeners=[],this._removedListeners=[],this.lengthProperty=new a(this._array.length,{numberType:"Integer",tandem:e.tandem.createTandem("lengthProperty"),phetioReadOnly:!0}),u.call(this,e)}var n=e("AXON/axon"),r=e("PHET_CORE/inherit"),i=e("PHET_CORE/merge"),a=e("AXON/NumberProperty"),o=e("TANDEM/types/ObjectIO"),s=e("AXON/ObservableArrayIO"),u=e("TANDEM/PhetioObject"),l=e("TANDEM/Tandem"),c=s(o);return n.register("ObservableArray",t),r(u,t,{dispose:function(){this.lengthProperty.dispose(),u.prototype.dispose.call(this)},reset:function(){this.clear()},get length(){return this._array.length},addItemAddedListener:function(e){this._addedListeners.push(e)},removeItemAddedListener:function(e){var t=this._addedListeners.indexOf(e);this._addedListeners.splice(t,1)},addItemRemovedListener:function(e){this._removedListeners.push(e)},removeItemRemovedListener:function(e){var t=this._removedListeners.indexOf(e);this._removedListeners.splice(t,1)},_fireItemAdded:function(e){var t=this;this.phetioStartEvent("itemAdded",{getData:function(){return t.phetioType.parameterTypes[0].toStateObject(e)}});for(var n=this._addedListeners.slice(0),r=0;r<n.length;r++)n[r](e,this);this.phetioEndEvent()},_fireItemRemoved:function(e){var t=this;this.phetioStartEvent("itemRemoved",{getData:function(){return t.phetioType.parameterTypes[0].toStateObject(e)}});for(var n=this._removedListeners.slice(0),r=0;r<n.length;r++)n[r](e,this);this.phetioEndEvent()},add:function(e){this.push(e)},addAll:function(e){for(var t=0;t<e.length;t++)this.add(e[t])},remove:function(e){var t=this._array.indexOf(e);-1!==t&&(this._array.splice(t,1),this.lengthProperty.set(this._array.length),this._fireItemRemoved(e))},removeAll:function(e){for(var t=0;t<e.length;t++)this.remove(e[t])},push:function(e){if(!this.allowDuplicates&&this.contains(e))throw new Error("duplicates are not allowed");this._array.push(e),this.lengthProperty.set(this._array.length),this._fireItemAdded(e)},pop:function(){var e=this._array.pop();return void 0!==e&&(this.lengthProperty.set(this._array.length),this._fireItemRemoved(e)),e},shift:function(){var e=this._array.shift();return void 0!==e&&(this.lengthProperty.set(this._array.length),this._fireItemRemoved(e)),e},contains:function(e){return-1!==this.indexOf(e)},get:function(e){return this._array[e]},indexOf:function(e){return this._array.indexOf(e)},clear:function(){for(;this.length>0;)this.pop()},forEach:function(e){this._array.slice().forEach(e)},map:function(e){return this._array.map(e)},filter:function(e){return this._array.filter(e)},count:function(e){for(var t=0,n=0;n<this._array.length;n++)e(this._array[n])&&t++;return t},find:function(e,t){return _.find(this._array,e,t)},some:function(e){return _.some(this._array,e)},reduce:function(e,t){for(var n=0;n<this._array.length;n++)e=t(e,this._array[n]);return e},getArray:function(){return this._array},splice:function(e,t,n,r,i){for(var a=this._array.splice.apply(this._array,arguments),o=Array.prototype.slice.call(arguments),s=0;s<a.length;s++)this._fireItemRemoved(a[s]);for(var u=2;u<o.length;u++)this._fireItemAdded(o[u]);return a},shuffle:function(e){var t=e.shuffle(this._array);this._array.length=0,Array.prototype.push.apply(this._array,t)}})}),n("AXON/StringProperty",["require","AXON/axon","PHET_CORE/merge","AXON/Property","AXON/PropertyIO","TANDEM/types/StringIO"],function(e){"use strict";var t=e("AXON/axon"),n=e("PHET_CORE/merge"),r=e("AXON/Property"),i=e("AXON/PropertyIO")(e("TANDEM/types/StringIO")),a=function(e){function t(e,r){return _classCallCheck(this,t),r=n({valueType:"string",phetioType:i},r),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return _inherits(t,r),t}();return t.register("StringProperty",a)}),n("AXON/main",["require","AXON/axon","AXON/BooleanProperty","AXON/DerivedProperty","AXON/DynamicProperty","AXON/Emitter","AXON/Events","AXON/Multilink","AXON/ObservableArray","AXON/Property","AXON/StringProperty","AXON/NumberProperty"],function(e){"use strict";var t=e("AXON/axon");e("AXON/BooleanProperty"),e("AXON/DerivedProperty"),e("AXON/DynamicProperty"),e("AXON/Emitter"),e("AXON/Events"),e("AXON/Multilink"),e("AXON/ObservableArray"),e("AXON/Property"),e("AXON/StringProperty"),e("AXON/NumberProperty");return t}),n("PHET_CORE/arrayDifference",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t,n,r,i){n=n||[],r=r||[],i=i||[],Array.prototype.push.apply(n,e),Array.prototype.push.apply(r,t);e:for(var a=0;a<n.length;a++)for(var o=n[a],s=0;s<r.length;s++){if(o===r[s]){if(i.push(o),n.splice(a,1),r.splice(s,1),s=0,a===n.length)break e;a-=1}}return n}return e("PHET_CORE/phetCore").register("arrayDifference",t),t}),n("PHET_CORE/collect",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){var t=[];return e(function(e){t.push(e)}),t}return e("PHET_CORE/phetCore").register("collect",t),t}),n("PHET_CORE/detectPrefix",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){return void 0!==e[t]?t:(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==e["moz"+t]?"moz"+t:void 0!==e["Moz"+t]?"Moz"+t:void 0!==e["webkit"+t]?"webkit"+t:void 0!==e["ms"+t]?"ms"+t:void 0!==e["o"+t]?"o"+t:void 0)}return e("PHET_CORE/phetCore").register("detectPrefix",t),t}),n("PHET_CORE/detectPrefixEvent",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t,n){return void 0!==e["on"+t]?t:void 0!==e["onmoz"+t]?"moz"+t:void 0!==e["onMoz"+t]?"Moz"+t:void 0!==e["onwebkit"+t]?"webkit"+t:void 0!==e["onms"+t]?"ms"+t:void 0!==e["ono"+t]?"o"+t:void 0}return e("PHET_CORE/phetCore").register("detectPrefixEvent",t),t}),n("PHET_CORE/dimensionForEach",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t,n){function r(e,t){return t.forEach(function(t,a){i.push(a),1===e?n.apply(null,[t].concat(i)):r(e-1,t),i.pop()})}var i=[];return r(e,t)}return e("PHET_CORE/phetCore").register("dimensionForEach",t),t}),n("PHET_CORE/dimensionMap",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t,n){function r(e,t){return t.map(function(t,a){i.push(a);var o=1===e?n.apply(null,[t].concat(i)):r(e-1,t);return i.pop(),o})}var i=[];return r(e,t)}return e("PHET_CORE/phetCore").register("dimensionMap",t),t}),n("PHET_CORE/EnumerationMap",["require","PHET_CORE/phetCore"],function(e){"use strict";var t=e("PHET_CORE/phetCore"),n=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._enumeration=t,t.VALUES.forEach(function(e){r[e]=n(e)})}return _createClass(e,[{key:"get",value:function(e){return this[e]}},{key:"map",value:function(t){var n=this;return new e(this._enumeration,function(e){return t(n.get(e),e)})}},{key:"forEach",value:function(e){var t=this;this._enumeration.VALUES.forEach(function(n){return e(t.get(n),n)})}}]),e}();return t.register("EnumerationMap",n)}),n("PHET_CORE/escapeHTML",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}return e("PHET_CORE/phetCore").register("escapeHTML",t),t}),n("PHET_CORE/EventTimer",["require","PHET_CORE/inherit","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){this.eventModel=e,this.eventCallback=t,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period}var n=e("PHET_CORE/inherit");return e("PHET_CORE/phetCore").register("EventTimer",t),n(Object,t,{step:function(e){for(;e>=this.timeBeforeNextEvent;)e-=this.timeBeforeNextEvent,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period,this.eventCallback(e);this.timeBeforeNextEvent-=e},getRatio:function(){return(this.period-this.timeBeforeNextEvent)/this.period}}),t.ConstantEventModel=n(Object,function(e){this.rate=e},{getPeriodBeforeNextEvent:function(){return 1/this.rate}}),t.UniformEventModel=n(Object,function(e,t){this.rate=e,this.pseudoRandomNumberSource=t},{getPeriodBeforeNextEvent:function(){var e=this.pseudoRandomNumberSource();return 2*e/this.rate}}),t.PoissonEventModel=n(Object,function(e,t){this.rate=e,this.pseudoRandomNumberSource=t},{getPeriodBeforeNextEvent:function(){var e=this.pseudoRandomNumberSource();return-Math.log(e)/this.rate}}),t}),n("PHET_CORE/extendDefined",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return _.each(Array.prototype.slice.call(arguments,1),function(t){if(t)for(var n in t){var r=Object.getOwnPropertyDescriptor(t,n);!r||"function"!=typeof r.get&&void 0===t[n]||Object.defineProperty(e,n,r)}}),e}return e("PHET_CORE/phetCore").register("extendDefined",t),t}),n("PHET_CORE/inheritance",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){for(var t=[e],n=e.prototype;n&&(n=Object.getPrototypeOf(n));)n.constructor&&t.push(n.constructor);return t}return e("PHET_CORE/phetCore").register("inheritance",t),t}),n("PHET_CORE/interleave",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){for(var n=[],r=2*e.length-1,i=0;i<r;i++)i%2==0?n.push(e[i/2]):n.push(t((i-1)/2));return n}return e("PHET_CORE/phetCore").register("interleave",t),t}),n("PHET_CORE/isArray",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return"[object Array]"===Object.prototype.toString.call(e)}return e("PHET_CORE/phetCore").register("isArray",t),t}),n("PHET_CORE/loadScript",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){"string"==typeof e&&(e={src:e});var t=e.src,n=e.callback,r=void 0===e.async||e.async,i=void 0!==e.cacheBust&&e.cacheBust,a=!1,o=document.createElement("script");o.type="text/javascript",o.async=r,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"complete"!==e&&"loaded"!==e||a||(a=!0,n&&n())},o.src=t+(i?"?random="+Math.random().toFixed(10):"");var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s)}return e("PHET_CORE/phetCore").register("loadScript",t),t}),n("PHET_CORE/mixedWith",["require","PHET_CORE/inherit","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){t=Array.prototype.slice.call(arguments,1);var r=e.name;t.forEach(function(e){r=r+"_"+e.name.replace(/bound /g,"_")});var i=[],a=new Function("return function( suptype, inits ) {  return function "+r+"() {    var self = this;    var args = Array.prototype.slice.call( arguments );    suptype.apply( this, args );    inits.forEach( function( init ) { init.apply( self, args ); } );  };};")()(e,i);return n(e,a),t.forEach(function(e){var t=e(a);"function"==typeof t&&i.push(t)}),a}var n=e("PHET_CORE/inherit");return e("PHET_CORE/phetCore").register("mixedWith",t),t}),n("PHET_CORE/openPopup",["require","PHET_CORE/phetCore"],function(e){"use strict";return e("PHET_CORE/phetCore").register("openPopup",function(e){var t=window.open(e,"_blank");t&&t.focus()})}),n("PHET_CORE/pairs",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){var t=[],n=e.length;if(n>1)for(var r=0;r<n-1;r++)for(var i=e[r],a=r+1;a<n;a++)t.push([i,e[a]]);return t}return e("PHET_CORE/phetCore").register("pairs",t),t}),n("PHET_CORE/partition",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e,t){for(var n=[],r=[],i=e.length,a=0;a<i;a++)t(e[a])?n.push(e[a]):r.push(e[a]);return[n,r]}return e("PHET_CORE/phetCore").register("partition",t),t}),n("PHET_CORE/platform",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return r()===e}function n(){return!!(window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(a.match(/(iPod|iPhone|iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>=2)&&a.match(/AppleWebKit/))}function r(){var e=-1;return"Microsoft Internet Explorer"===navigator.appName?null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(a)&&(e=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a)&&(e=parseFloat(RegExp.$1)),e}var i=e("PHET_CORE/phetCore"),a=navigator.userAgent,o={firefox:a.toLowerCase().indexOf("firefox")>-1,mobileSafari:n(),safari5:!!(a.match(/Version\/5\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari6:!!(a.match(/Version\/6\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari7:!!(a.match(/Version\/7\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari10:!!(a.match(/Version\/10\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari11:!!(a.match(/Version\/11\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari9:!!(a.match(/Version\/9\./)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),safari:n()||!!(a.match(/Version\//)&&a.match(/Safari\//)&&a.match(/AppleWebKit/)),ie:-1!==r(),ie9:t(9),ie10:t(10),ie11:t(11),android:a.indexOf("Android")>0,edge:!!a.match(/Edge\//),chromium:/chrom(e|ium)/.test(a.toLowerCase())&&!a.match(/Edge\//)};return i.register("platform",o),o}),n("PHET_CORE/Poolable",["require","PHET_CORE/extend","PHET_CORE/merge","PHET_CORE/phetCore"],function(e){"use strict";var t=e("PHET_CORE/extend"),n=e("PHET_CORE/merge"),r={mixInto:function(e,r){r=n({defaultArguments:[],initialize:e,maxSize:100,initialSize:0,useDefaultConstruction:!1},r);var i=[],a=Function.prototype.bind.bind(e,e),o=a.apply(null,r.defaultArguments),s=r.initialize,u=r.useDefaultConstruction;for(t(e,{pool:i,dirtyFromPool:function(){return i.length?i.pop():new o},createFromPool:function(){var e=void 0;return i.length?(e=i.pop(),s.apply(e,arguments)):u?(e=new o,s.apply(e,arguments)):e=new(a.apply(null,arguments)),e}}),t(e.prototype,{freeToPool:function(){i.length<r.maxSize&&i.push(this)}});i.length<r.initialSize;)i.push(new o)}};return e("PHET_CORE/phetCore").register("Poolable",r),r}),n("PHET_CORE/main",["require","PHET_CORE/phetCore","PHET_CORE/arrayDifference","PHET_CORE/arrayRemove","PHET_CORE/cleanArray","PHET_CORE/collect","PHET_CORE/detectPrefix","PHET_CORE/detectPrefixEvent","PHET_CORE/dimensionForEach","PHET_CORE/dimensionMap","PHET_CORE/Enumeration","PHET_CORE/EnumerationMap","PHET_CORE/escapeHTML","PHET_CORE/EventTimer","PHET_CORE/extend","PHET_CORE/extendDefined","PHET_CORE/inherit","PHET_CORE/inheritance","PHET_CORE/interleave","PHET_CORE/isArray","PHET_CORE/loadScript","PHET_CORE/merge","PHET_CORE/mixedWith","PHET_CORE/Namespace","PHET_CORE/openPopup","PHET_CORE/pairs","PHET_CORE/partition","PHET_CORE/platform","PHET_CORE/Poolable"],function(e){"use strict";var t=e("PHET_CORE/phetCore");return e("PHET_CORE/arrayDifference"),e("PHET_CORE/arrayRemove"),e("PHET_CORE/cleanArray"),e("PHET_CORE/collect"),e("PHET_CORE/detectPrefix"),e("PHET_CORE/detectPrefixEvent"),e("PHET_CORE/dimensionForEach"),e("PHET_CORE/dimensionMap"),e("PHET_CORE/Enumeration"),e("PHET_CORE/EnumerationMap"),e("PHET_CORE/escapeHTML"),e("PHET_CORE/EventTimer"),e("PHET_CORE/extend"),e("PHET_CORE/extendDefined"),e("PHET_CORE/inherit"),e("PHET_CORE/inheritance"),e("PHET_CORE/interleave"),e("PHET_CORE/isArray"),e("PHET_CORE/loadScript"),e("PHET_CORE/merge"),e("PHET_CORE/mixedWith"),e("PHET_CORE/Namespace"),e("PHET_CORE/openPopup"),e("PHET_CORE/pairs"),e("PHET_CORE/partition"),e("PHET_CORE/platform"),e("PHET_CORE/Poolable"),t}),n("UTTERANCE_QUEUE/utteranceQueueNamespace",["require","PHET_CORE/Namespace"],function(e){"use strict";return new(e("PHET_CORE/Namespace"))("utteranceQueue")}),n("UTTERANCE_QUEUE/Utterance",["require","PHET_CORE/merge","UTTERANCE_QUEUE/utteranceQueueNamespace","AXON/validate"],function(e){"use strict";var t=e("PHET_CORE/merge"),n=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),r=e("AXON/validate"),i={isValidValue:function(e){return"string"==typeof e||Array.isArray(e)&&_.every(e,function(e){return"string"==typeof e})}},a=function(){function e(n){_classCallCheck(this,e),n=t({alert:null,loopAlerts:!1,predicate:function(){return!0},alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE},n),this._alert=n.alert,this.loopAlerts=n.loopAlerts,this.numberOfTimesAlerted=0,this.predicate=n.predicate,this.timeInQueue=0,this.stableTime=0,this.alertStableDelay=n.alertStableDelay,this.alertMaximumDelay=n.alertMaximumDelay}return _createClass(e,[{key:"getTextToAlert",value:function(){var e=void 0;if("string"==typeof this._alert)e=this._alert;else if(this.loopAlerts)e=this._alert[this.numberOfTimesAlerted%this._alert.length];else{var t=Math.min(this.numberOfTimesAlerted,this._alert.length-1);e=this._alert[t]}return this.numberOfTimesAlerted++,e}},{key:"setAlertStableDelay",value:function(e){this.alertStableDelay=e}},{key:"resetTimingVariables",value:function(){this.timeInQueue=0,this.stableTime=0}},{key:"reset",value:function(){this.numberOfTimesAlerted=0,this.resetTimingVariables()}},{key:"alert",set:function(e){r(e,i),this._alert=e},get:function(){return this._alert}}]),e}();return n.register("Utterance",a)}),n("UTTERANCE_QUEUE/ActivationUtterance",["require","PHET_CORE/merge","UTTERANCE_QUEUE/utteranceQueueNamespace","UTTERANCE_QUEUE/Utterance"],function(e){"use strict";var t=e("PHET_CORE/merge"),n=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),r=e("UTTERANCE_QUEUE/Utterance"),i=function(e){function n(e){return _classCallCheck(this,n),e=t({alertStableDelay:500},e),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return _inherits(n,r),n}();return n.register("ActivationUtterance",i)}),n("UTTERANCE_QUEUE/AlertableDef",["require","UTTERANCE_QUEUE/utteranceQueueNamespace","UTTERANCE_QUEUE/Utterance"],function(e){"use strict";var t=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),n=e("UTTERANCE_QUEUE/Utterance"),r={isAlertableDef:function(e){var t=!0;if(Array.isArray(e))for(var n=0;n<e.length&&(t=i(e[n]));n++);else t=i(e);return t}},i=function(e){return"string"==typeof e||"number"==typeof e||e instanceof n};return t.register("AlertableDef",r),r}),n("KITE/kite",["require","PHET_CORE/Namespace"],function(e){"use strict";var t=new(e("PHET_CORE/Namespace"))("kite");return t.register("svgNumber",function(e){return e.toFixed(20)}),t}),n("SCENERY/scenery",["require","AXON/axon","DOT/dot","PHET_CORE/extend","PHET_CORE/inheritance","KITE/kite","PHET_CORE/Namespace"],function(e){"use strict";function t(e){h.logString+=e.replace(/%c/g,"")+"\n"}function n(){window.console&&window.console.log&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments,0))}var r=e("AXON/axon"),i=e("DOT/dot"),a=e("PHET_CORE/extend"),o=e("PHET_CORE/inheritance"),s=e("KITE/kite"),u=e("PHET_CORE/Namespace");window.sceneryLog=null,window.sceneryAccessibilityLog=null;var l=document.createElement("canvas"),c=l.getContext("2d"),p="",h=new u("scenery");h.register("scratchCanvas",l),h.register("scratchContext",c),h.register("svgns","http://www.w3.org/2000/svg"),h.register("xlinkns","http://www.w3.org/1999/xlink");var d={dirty:{name:"dirty",style:"color: #888;"},bounds:{name:"bounds",style:"color: #888;"},hitTest:{name:"hitTest",style:"color: #888;"},hitTestInternal:{name:"hitTestInternal",style:"color: #888;"},PerfCritical:{name:"Perf",style:"color: #f00;"},PerfMajor:{name:"Perf",style:"color: #aa0;"},PerfMinor:{name:"Perf",style:"color: #088;"},PerfVerbose:{name:"Perf",style:"color: #888;"},Cursor:{name:"Cursor",style:""},Stitch:{name:"Stitch",style:""},StitchDrawables:{name:"Stitch",style:""},GreedyStitcher:{name:"Greedy",style:"color: #088;"},GreedyVerbose:{name:"Greedy",style:"color: #888;"},RelativeTransform:{name:"RelativeTransform",style:"color: #606;"},BackboneDrawable:{name:"Backbone",style:"color: #a00;"},CanvasBlock:{name:"Canvas",style:""},WebGLBlock:{name:"WebGL",style:""},Display:{name:"Display",style:""},DOMBlock:{name:"DOM",style:""},Drawable:{name:"",style:""},FittedBlock:{name:"FittedBlock",style:""},Instance:{name:"Instance",style:""},InstanceTree:{name:"InstanceTree",style:""},ChangeInterval:{name:"ChangeInterval",style:"color: #0a0;"},SVGBlock:{name:"SVG",style:""},SVGGroup:{name:"SVGGroup",style:""},ImageSVGDrawable:{name:"ImageSVGDrawable",style:""},Paints:{name:"Paints",style:""},AlignBox:{name:"AlignBox",style:""},AlignGroup:{name:"AlignGroup",style:""},RichText:{name:"RichText",style:""},Accessibility:{name:"Accessibility",style:""},AccessibleInstance:{name:"AccessibleInstance",style:""},AccessibilityTree:{name:"AccessibilityTree",style:""},AccessibleDisplaysInfo:{name:"AccessibleDisplaysInfo",style:""},KeyboardFuzzer:{name:"KeyboardFuzzer",style:""},InputListener:{name:"InputListener",style:""},InputEvent:{name:"InputEvent",style:""},OnInput:{name:"OnInput",style:""},Pointer:{name:"Pointer",style:""},Input:{name:"Input",style:""},EventDispatch:{name:"EventDispatch",style:""}};return a(h,{logString:"",logFunction:function(){window.console&&window.console.log&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments,0))},switchLogToConsole:function(){h.logFunction=n},switchLogToString:function(){window.console&&window.console.log("switching to string log"),h.logFunction=t},enableIndividualLog:function(e){return"stitch"===e?(this.enableIndividualLog("Stitch"),this.enableIndividualLog("StitchDrawables"),this.enableIndividualLog("GreedyStitcher"),void this.enableIndividualLog("GreedyVerbose")):"perf"===e?(this.enableIndividualLog("PerfCritical"),this.enableIndividualLog("PerfMajor"),this.enableIndividualLog("PerfMinor"),void this.enableIndividualLog("PerfVerbose")):"input"===e?(this.enableIndividualLog("InputListener"),this.enableIndividualLog("InputEvent"),this.enableIndividualLog("OnInput"),this.enableIndividualLog("Pointer"),this.enableIndividualLog("Input"),void this.enableIndividualLog("EventDispatch")):"a11y"===e?(this.enableIndividualLog("Accessibility"),this.enableIndividualLog("AccessibleInstance"),this.enableIndividualLog("AccessibilityTree"),void this.enableIndividualLog("AccessibleDisplaysInfo")):void(e&&(window.sceneryLog[e]=window.sceneryLog[e]||function(t,n){var r=d[e],i=r.name?"["+r.name+"] ":"";h.logFunction("%c"+p+"%c"+i+t,"color: #ddd;",n||r.style)}))},disableIndividualLog:function(e){e&&delete window.sceneryLog[e]},enableLogging:function(e){window.sceneryLog=function(e){h.logFunction(e)},window.sceneryLog.push=function(){p+="| "},window.sceneryLog.pop=function(){p=p.slice(0,-2)},window.sceneryLog.getDepth=function(){return p.length/2};for(var t=0;t<e.length;t++)this.enableIndividualLog(e[t])},disableLogging:function(){window.sceneryLog=null},isLoggingPerformance:function(){return window.sceneryLog.PerfCritical||window.sceneryLog.PerfMajor||window.sceneryLog.PerfMinor||window.sceneryLog.PerfVerbose},copy:function(e){return h.deserialize(h.serialize(e))},serialize:function(e){if(e instanceof i.Vector2)return{type:"Vector2",x:e.x,y:e.y};if(e instanceof i.Matrix3)return{type:"Matrix3",m00:e.m00(),m01:e.m01(),m02:e.m02(),m10:e.m10(),m11:e.m11(),m12:e.m12(),m20:e.m20(),m21:e.m21(),m22:e.m22()};if(e instanceof i.Bounds2)return{type:"Bounds2",maxX:e.maxX,maxY:e.maxY,minX:e.minX,minY:e.minY};if(e instanceof s.Shape)return{type:"Shape",path:e.getSVGPath()};if(Array.isArray(e))return{type:"Array",value:e.map(h.serialize)};if(e instanceof h.Color)return{type:"Color",red:e.red,green:e.green,blue:e.blue,alpha:e.alpha};if(e instanceof r.Property)return{type:"Property",value:h.serialize(e.value)};if(h.Paint&&e instanceof h.Paint){var t={};return e.transformMatrix&&(t.transformMatrix=h.serialize(e.transformMatrix)),h.Gradient&&e instanceof h.Gradient&&(t.stops=e.stops.map(function(e){return{ratio:e.ratio,stop:h.serialize(e.color)}}),t.start=h.serialize(e.start),t.end=h.serialize(e.end),h.LinearGradient&&e instanceof h.LinearGradient?t.type="LinearGradient":h.RadialGradient&&e instanceof h.RadialGradient&&(t.type="RadialGradient",t.startRadius=e.startRadius,t.endRadius=e.endRadius)),h.Pattern&&e instanceof h.Pattern&&(t.type="Pattern",t.url=e.image.src),t}if(e instanceof h.Node){var n=e,a={},u={};["visible","opacity","pickable","inputEnabled","cursor","transformBounds","renderer","usesOpacity","layerSplit","cssTransform","excludeInvisible","webglScale","preventFit"].forEach(function(e){n[e]!==h.Node.DEFAULT_OPTIONS[e]&&(a[e]=n[e])}),["maxWidth","maxHeight","clipArea","mouseArea","touchArea"].forEach(function(e){n[e]!==h.Node.DEFAULT_OPTIONS[e]&&(u[e]=h.serialize(n[e]))}),n.matrix.isIdentity()||(u.matrix=h.serialize(n.matrix)),n._localBoundsOverridden&&(u.localBounds=h.serialize(n.localBounds)),u.children=n.children.map(function(e){return e.id}),u.hasInputListeners=n.inputListeners.length>0;var l={id:n.id,type:"Node",types:o(n.constructor).map(function(e){return e.name}).filter(function(e){return e&&"Object"!==e&&"Node"!==e}),name:n.constructor.name,options:a,setup:u};if(h.Path&&n instanceof h.Path&&(l.type="Path",u.path=h.serialize(n.shape),n.boundsMethod!==h.Path.DEFAULT_OPTIONS.boundsMethod&&(a.boundsMethod=n.boundsMethod)),h.Circle&&n instanceof h.Circle&&(l.type="Circle",a.radius=n.radius),h.Line&&n instanceof h.Line&&(l.type="Line",a.x1=n.x1,a.y1=n.y1,a.x2=n.x2,a.y2=n.y2),h.Rectangle&&n instanceof h.Rectangle&&(l.type="Rectangle",a.rectX=n.rectX,a.rectY=n.rectY,a.rectWidth=n.rectWidth,a.rectHeight=n.rectHeight,a.cornerXRadius=n.cornerXRadius,a.cornerYRadius=n.cornerYRadius),h.Text&&n instanceof h.Text&&(l.type="Text","hybrid"!==n.boundsMethod&&(a.boundsMethod=n.boundsMethod),a.text=n.text,a.font=n.font),h.HTMLText&&n instanceof h.HTMLText&&(l.type="HTMLText"),h.Image&&n instanceof h.Image&&(l.type="Image",["imageOpacity","initialWidth","initialHeight","mipmapBias","mipmapInitialLevel","mipmapMaxLevel"].forEach(function(e){n[e]!==h.Image.DEFAULT_OPTIONS[e]&&(a[e]=n[e])}),u.width=n.imageWidth,u.height=n.imageHeight,n._mipmapData?(u.imageType="mipmapData",u.mipmapData=n._mipmapData.map(function(e){return{url:e.url,width:e.width,height:e.height}})):(n._mipmap&&(u.generateMipmaps=!0),n._image instanceof HTMLImageElement?(u.imageType="image",u.src=n._image.src):n._image instanceof HTMLCanvasElement&&(u.imageType="canvas",u.src=n._image.toDataURL()))),h.CanvasNode&&n instanceof h.CanvasNode||h.WebGLNode&&n instanceof h.WebGLNode){l.type=h.CanvasNode&&n instanceof h.CanvasNode?"CanvasNode":"WebGLNode",u.canvasBounds=h.serialize(n.canvasBounds);Math.min(5,n._drawables.length?1/_.mean(n._drawables.map(function(e){var t=e.instance.trail.getMatrix().getScaleVector();return(t.x+t.y)/2})):1);1;var c=document.createElement("canvas");c.width=Math.ceil(1*n.canvasBounds.width),c.height=Math.ceil(1*n.canvasBounds.height);var p=c.getContext("2d"),d=new h.CanvasContextWrapper(c,p),f=i.Matrix3.scale(1);d.context.setTransform(1,0,0,1,-n.canvasBounds.left,-n.canvasBounds.top),n.renderToCanvasSelf(d,f),u.url=c.toDataURL(),u.scale=1,u.offset=h.serialize(n.canvasBounds.leftTop)}return h.DOM&&n instanceof h.DOM&&(l.type="DOM",u.element=(new window.XMLSerializer).serializeToString(n.element)),(h.Path&&n instanceof h.Path||h.Text&&n instanceof h.Text)&&(["fillPickable","strokePickable","lineWidth","lineCap","lineJoin","lineDashOffset","miterLimit"].forEach(function(e){n[e]!==h.Paintable.DEFAULT_OPTIONS[e]&&(a[e]=n[e])}),n.fill!==h.Paintable.DEFAULT_OPTIONS.fill&&(u.fill=h.serialize(n.fill)),n.stroke!==h.Paintable.DEFAULT_OPTIONS.stroke&&(u.stroke=h.serialize(n.stroke)),n.lineDash.length&&(u.lineDash=h.serialize(n.lineDash))),l}return e instanceof h.Display?{type:"Display",width:e.width,height:e.height,backgroundColor:h.serialize(e.backgroundColor),tree:{type:"Subtree",rootNodeId:e.rootNode.id,nodes:h.serializeConnectedNodes(e.rootNode)}}:{type:"value",value:e}},deserialize:function(e){if("Vector2"===e.type)return new i.Vector2(e.x,e.y);if("Matrix3"===e.type)return(new i.Matrix3).rowMajor(e.m00,e.m01,e.m02,e.m10,e.m11,e.m12,e.m20,e.m21,e.m22);if("Bounds2"===e.type)return new i.Bounds2(e.minX,e.minY,e.maxX,e.maxY);if("Shape"===e.type)return new s.Shape(e.path);if("Array"===e.type)return e.value.map(h.deserialize);if("Color"===e.type)return new h.Color(e.red,e.green,e.blue,e.alpha);if("Property"===e.type)return new r.Property(h.deserialize(e.value));if("Pattern"===e.type||"LinearGradient"===e.type||"RadialGradient"===e.type){var t=void 0;if("Pattern"===e.type){var n=new window.Image;n.src=e.url,t=new h.Pattern(n)}else{var a=h.deserialize(e.start),o=h.deserialize(e.end);"LinearGradient"===e.type?t=new h.LinearGradient(a.x,a.y,o.x,o.y):"RadialGradient"===e.type&&(t=new h.RadialGradient(a.x,a.y,e.startRadius,o.x,o.y,e.endRadius)),e.stops.forEach(function(e){t.addColorStop(e.ratio,h.deserialize(e.stop))})}return e.transformMatrix&&t.setTransformMatrix(h.deserialize(e.transformMatrix)),t}if(_.includes(["Node","Path","Circle","Line","Rectangle","Text","HTMLText","Image","CanvasNode","WebGLNode","DOM"],e.type)){var u=void 0,l=e.setup;if("Node"===e.type)u=new h.Node;else if("Path"===e.type)u=new h.Path(h.deserialize(l.path));else if("Circle"===e.type)u=new h.Circle({});else if("Line"===e.type)u=new h.Line({});else if("Rectangle"===e.type)u=new h.Rectangle({});else if("Text"===e.type)u=new h.Text("");else if("HTMLText"===e.type)u=new h.HTMLText("");else if("Image"===e.type){if("image"===l.imageType||"canvas"===l.imageType)u=new h.Image(l.src),l.generateMipmaps&&(u.mipmaps=!0);else if("mipmapData"===l.imageType){var c=l.mipmapData.map(function(e){var t={width:e.width,height:e.height,url:e.url};t.img=new window.Image,t.img.src=e.url,t.canvas=document.createElement("canvas"),t.canvas.width=e.width,t.canvas.height=e.height;var n=t.canvas.getContext("2d");return t.updateCanvas=function(){t.img.complete&&(void 0===t.img.naturalWidth||t.img.naturalWidth>0)&&(n.drawImage(t.img,0,0),delete t.updateCanvas)},t});u=new h.Image(c)}u.initialWidth=l.width,u.initialHeight=l.height}else if("CanvasNode"===e.type||"WebGLNode"===e.type)u=new h.Node({children:[new h.Image(l.url,{translation:h.deserialize(l.offset),scale:1/l.scale})]});else if("DOM"===e.type){var p=document.createElement("div");p.innerHTML=e.element;var d=p.childNodes[0];p.removeChild(d),u=new h.DOM(d)}return l.clipArea&&(u.clipArea=h.deserialize(l.clipArea)),l.mouseArea&&(u.mouseArea=h.deserialize(l.mouseArea)),l.touchArea&&(u.touchArea=h.deserialize(l.touchArea)),l.matrix&&(u.matrix=h.deserialize(l.matrix)),l.localBounds&&(u.localBounds=h.deserialize(l.localBounds)),l.fill&&(u.fill=h.deserialize(l.fill)),l.stroke&&(u.stroke=h.deserialize(l.stroke)),l.lineDash&&(u.lineDash=h.deserialize(l.lineDash)),u.mutate(e.options),u._serialization=e,u}if("Subtree"===e.type){var f={},m=e.nodes.map(h.deserialize);return m.forEach(function(e){f[e._serialization.id]=e}),m.forEach(function(e){e._serialization.setup.children.forEach(function(t){e.addChild(f[t])})}),f[e.rootNodeId]}return"value"===e.type?e.value:void 0},serializeConnectedNodes:function(e){return e.getSubtreeNodes().map(h.serialize)}}),h}),n("SCENERY/util/SceneryStyle",["require","SCENERY/scenery"],function(e){"use strict";var t=e("SCENERY/scenery"),n=document.createElement("style");n.type="text/css",document.head.appendChild(n);var r=document.styleSheets[document.styleSheets.length-1];return t.register("SceneryStyle",{stylesheet:r,styleElement:n,addRule:function(e){this.stylesheet.insertRule(e,0)}})}),n("SCENERY/accessibility/AccessibleSiblingStyle",["require","SCENERY/util/SceneryStyle","SCENERY/scenery"],function(e){"use strict";var t=e("SCENERY/util/SceneryStyle"),n=e("SCENERY/scenery");t.addRule(".a11y-sibling{position: fixed;pointer-events: none;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);}"),t.addRule(".a11y-root{position: absolute;z-index: 1;opacity: 0.0001;}");var r={SIBLING_CLASS_NAME:"a11y-sibling",ROOT_CLASS_NAME:"a11y-root"};return n.register("AccessibleSiblingStyle",r)}),n("PHET_CORE/stripEmbeddingMarks",["require","PHET_CORE/phetCore"],function(e){"use strict";function t(e){return e.replace(/\u202a|\u202b|\u202c/g,"")}return e("PHET_CORE/phetCore").register("stripEmbeddingMarks",t),t}),n("SCENERY/accessibility/AccessibilityUtils",["require","SCENERY/accessibility/AccessibleSiblingStyle","PHET_CORE/merge","SCENERY/scenery","PHET_CORE/stripEmbeddingMarks","AXON/validate"],function(e){"use strict";function t(e){for(var t=e.getElementsByTagName("*"),n=[],r=0;r<t.length;r++)t[r].nodeType===Node.ELEMENT_NODE&&(n[r]=t[r]);return n}function n(e){return!!e.hidden||e!==document.body&&n(e.parentElement)}function r(e,n){for(var r=t(n||document.body),i=document.activeElement,a=r.indexOf(i),o=e===p?1:-1,s=a+o;s<r.length&&s>=0;){var u=r[s];if(s+=o,m.isElementFocusable(u))return u}return i}function i(e){return e.replace(/^\s+/,"")}function a(e){return!_.includes(f,e.toUpperCase())}var o=e("SCENERY/accessibility/AccessibleSiblingStyle"),s=e("PHET_CORE/merge"),u=e("SCENERY/scenery"),l=e("PHET_CORE/stripEmbeddingMarks"),c=e("AXON/validate"),p="NEXT",h=["A","AREA","INPUT","SELECT","TEXTAREA","BUTTON","IFRAME"],d=["B","STRONG","I","EM","MARK","SMALL","DEL","INS","SUB","SUP","BR"],f=["INPUT"],m={getNextFocusable:function(e){return r(p,e)},getPreviousFocusable:function(e){return r("PREVIOUS",e)},getRandomFocusable:function(e){for(var n=t(document.body),r=[],i=0;i<n.length;i++)m.isElementFocusable(n[i])&&r.push(n[i]);return r[e.nextInt(r.length)]},containsFormattingTags:function(e){if(null===e)return!1;for(var t=0,n=[],r=[];t<e.length;){var a=e.indexOf("<",t),o=e.indexOf(">",t);a>-1&&(n.push(a),t=a+1),o>-1?(r.push(o),t=o+1):t++}if(n.length!==r.length||0===n.length)return!1;for(var s=!0,u=e.toUpperCase(),l=0;l<n.length;l++){var c=u.substring(n[l]+1,r[l]),p=i(c=c.replace("/",""));c.length-p.length>0||(_.includes(d,c)||(s=!1))}return s},setTextContent:function(e,t){var n=l(t);c.stringWithoutTemplateVars(n),a(e.tagName)&&(m.containsFormattingTags(n)?e.innerHTML=n:e.textContent=n)},tagIsDefaultFocusable:function(e){return _.includes(h,e.toUpperCase())},isElementFocusable:function(e){return!!document.body.contains(e)&&(!n(e)&&(!_.includes(d,e.tagName)&&"true"===e.getAttribute("data-focusable")))},tagNameSupportsContent:function(e){return a(e)},removeElements:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.removeChild(r)}},insertElements:function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];e.insertBefore(i,n||null)}},validateAssociationObject:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)t[n]},createElement:function(e,t,n){var r=(n=s({namespace:null,id:null,trailId:null},n)).namespace?document.createElementNS(n.namespace,e):document.createElement(e);return n.trailId&&r.setAttribute(m.DATA_TRAIL_ID,n.trailId),n.id&&(r.id=n.id),m.overrideFocusWithTabIndex(r,t),r.className=o.SIBLING_CLASS_NAME,r},overrideFocusWithTabIndex:function(e,t){m.tagIsDefaultFocusable(e.tagName)!==t?e.tabIndex=t?0:-1:e.removeAttribute("tabindex"),e.setAttribute("data-focusable",t)},TAGS:{INPUT:"INPUT",LABEL:"LABEL",BUTTON:"BUTTON",TEXTAREA:"TEXTAREA",SELECT:"SELECT",OPTGROUP:"OPTGROUP",DATALIST:"DATALIST",OUTPUT:"OUTPUT",DIV:"DIV",A:"A",P:"P",B:"B",STRONG:"STRONG",I:"I",EM:"EM",MARK:"MARK",SMALL:"SMALL",DEL:"DEL",INS:"INS",SUB:"SUB",SUP:"SUP"},FORM_ELEMENTS:["INPUT","BUTTON","TEXTAREA","SELECT","OPTGROUP","DATALIST","OUTPUT","A"],DEFAULT_CONTAINER_TAG_NAME:"DIV",DEFAULT_DESCRIPTION_TAG_NAME:"P",DEFAULT_LABEL_TAG_NAME:"P",ASSOCIATION_ATTRIBUTES:["aria-labelledby","aria-describedby","aria-activedescendant"],INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:["focusin","focusout","input","change","click","keydown","keyup"],DATA_TRAIL_ID:"data-trail-id"};return u.register("AccessibilityUtils",m),m}),n("AXON/timer",["require","AXON/Emitter","AXON/axon"],function(e){"use strict";var t=e("AXON/Emitter"),n=e("AXON/axon"),r=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return _inherits(n,t),_createClass(n,[{key:"setTimeout",value:function(e,t){var n=this,r=0,i=function i(a){1e3*(r+=a)>=t&&n.hasListener(i)&&(e(),n.removeListener(i))};return this.addListener(i),i}},{key:"clearTimeout",value:function(e){this.hasListener(e)&&this.removeListener(e)}},{key:"setInterval",value:function(e,t){var n=this,r=0,i=function i(a){for(r+=a;1e3*r>=t&&-1!==n.hasListener(i);)e(),r-=t/1e3};return this.addListener(i),i}},{key:"clearInterval",value:function(e){this.hasListener(e)&&this.removeListener(e)}}]),n}();return n.register("timer",new r({parameters:[{valueType:"number"}]}))}),n("UTTERANCE_QUEUE/AriaHerald",["require","SCENERY/accessibility/AccessibilityUtils","AXON/Emitter","UTTERANCE_QUEUE/utteranceQueueNamespace","AXON/timer"],function(e){"use strict";var t=e("SCENERY/accessibility/AccessibilityUtils"),n=e("AXON/Emitter"),r=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),i=e("AXON/timer"),a=4,o=1,s=function(){function e(){var t=this;_classCallCheck(this,e),this.elementIndex=0,this.announcingEmitter=new n({parameters:[{valueType:"string"}]}),this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("id","aria-live-elements-"+o),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");for(var r=1;r<=a;r++){var i=document.createElement("p");i.setAttribute("id","elements-"+o+"-polite-"+r),i.setAttribute("aria-live","polite"),this.ariaLiveContainer.appendChild(i)}this.ariaLiveElements=[].concat(_toConsumableArray(this.ariaLiveContainer.children)),this.announcingEmitter.addListener(function(e){var n=t.ariaLiveElements[t.elementIndex];t.updateLiveElement(n,e),t.elementIndex=(t.elementIndex+1)%t.ariaLiveElements.length}),o++}return _createClass(e,[{key:"announcePolite",value:function(e){this.announcingEmitter.emit(e)}},{key:"updateLiveElement",value:function(e,n){e.textContent="",e.hidden=!1,i.setTimeout(function(){t.setTextContent(e,n),i.setTimeout(function(){e.hidden=!0},200)},0)}}]),e}();return r.register("AriaHerald",s)}),n("UTTERANCE_QUEUE/UtteranceQueueIO",["require","TANDEM/types/BooleanIO","TANDEM/types/ObjectIO","UTTERANCE_QUEUE/utteranceQueueNamespace","TANDEM/types/StringIO","TANDEM/types/VoidIO"],function(e){"use strict";var t=e("TANDEM/types/BooleanIO"),n=e("TANDEM/types/ObjectIO"),r=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),i=e("TANDEM/types/StringIO"),a=e("TANDEM/types/VoidIO"),o=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,n),t}();return o.methods={addToBack:{returnType:a,parameterTypes:[i],implementation:function(e){return this.phetioObject.addToBack(e)},documentation:"Add the utterance (string) to the end of the queue.",invocableForReadOnlyElements:!1},addToFront:{returnType:a,parameterTypes:[i],implementation:function(e){return this.phetioObject.addToFront(e)},documentation:"Add the utterance (string) to the beginning of the queue.",invocableForReadOnlyElements:!1},setMuted:{returnType:a,parameterTypes:[t],implementation:function(e){this.phetioObject.muted(e)},documentation:"Set whether the utteranceQueue will be muted or not. If muted, utterances still move through the queue but will not be read by screen readers.",invocableForReadOnlyElements:!1},getMuted:{returnType:t,parameterTypes:[a],implementation:function(){return this.phetioObject.muted()},documentation:"Get whether the utteranceQueue is muted. If muted, utterances still move through the queue but will not be read by screen readers."},setEnabled:{returnType:a,parameterTypes:[t],implementation:function(e){this.phetioObject.enabled(e)},documentation:"Set whether the utteranceQueue will be enabled or not. When enabled, Utterances cannot be added to the queue, and the Queue cannot be cleared. Also nothing will be sent to assistive technology.",invocableForReadOnlyElements:!1},getEnabled:{returnType:t,parameterTypes:[a],implementation:function(){return this.phetioObject.enabled()},documentation:"Get whether the utteranceQueue is enabled. When enabled, Utterances cannot be added to the queue, and the Queue cannot be cleared. Also nothing will be sent to assistive technology."}},o.documentation="Manages a queue of Utterances that are read in order by a screen reader.",o.events=["announced"],o.validator={valueType:Object},o.typeName="UtteranceQueueIO",n.validateSubtype(o),r.register("UtteranceQueueIO",o)}),n("UTTERANCE_QUEUE/UtteranceQueue",["require","UTTERANCE_QUEUE/AlertableDef","UTTERANCE_QUEUE/AriaHerald","PHET_CORE/merge","TANDEM/PhetioObject","TANDEM/Tandem","AXON/timer","UTTERANCE_QUEUE/Utterance","UTTERANCE_QUEUE/UtteranceQueueIO","UTTERANCE_QUEUE/utteranceQueueNamespace"],function(e){"use strict";e("UTTERANCE_QUEUE/AlertableDef");var t=e("UTTERANCE_QUEUE/AriaHerald"),n=e("PHET_CORE/merge"),r=e("TANDEM/PhetioObject"),i=e("TANDEM/Tandem"),a=e("AXON/timer"),o=e("UTTERANCE_QUEUE/Utterance"),s=e("UTTERANCE_QUEUE/UtteranceQueueIO"),u=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),l=function(e){function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,u);var n=null;e||(n={tandem:i.GENERAL.createTandem("utteranceQueue"),phetioType:s,phetioState:!1});var r=_possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n));return r._initialized=!e,r.queue=[],r._muted=!1,r._enabled=!0,r.ariaHerald=new t,r._initialized&&a.addListener(r.stepQueue.bind(r)),r}return _inherits(u,r),_createClass(u,[{key:"getAriaLiveContainer",value:function(){return this.ariaHerald.ariaLiveContainer}},{key:"addToBack",value:function(e){this.initializedAndEnabled&&(e=this.prepareUtterance(e),this.queue.push(e))}},{key:"addToBackIfDefined",value:function(e){null!==e&&void 0!==e&&this.addToBack(e)}},{key:"addToFront",value:function(e){this.initializedAndEnabled&&(e=this.prepareUtterance(e),this.queue.unshift(e))}},{key:"prepareUtterance",value:function(e){return"string"==typeof e&&(e=new o({alert:e})),this.removeUtterance(e,{assertExists:!1}),e.stableTime=0,e}},{key:"removeUtterance",value:function(e,t){t=n({assertExists:!0},t),_.remove(this.queue,function(t){return t===e})}},{key:"canAlertUtterance",value:function(e){return!this._muted&&e.predicate()}},{key:"getNextUtterance",value:function(){for(var e=null,t=0;t<this.queue.length;t++){var n=this.queue[t];if(n.stableTime>n.alertStableDelay||n.timeInQueue>n.alertMaximumDelay){e=n,this.queue.splice(t,1);break}}return e}},{key:"hasUtterance",value:function(e){return _.includes(this.queue,e)}},{key:"clear",value:function(){this.queue=[]}},{key:"setMuted",value:function(e){this._muted=e}},{key:"getMuted",value:function(){return this._muted}},{key:"setEnabled",value:function(e){this._enabled=e}},{key:"getEnabled",value:function(){return this._enabled}},{key:"stepQueue",value:function(e){if(this._enabled){e*=1e3;for(var t=0;t<this.queue.length;t++)this.queue[t].timeInQueue+=e,this.queue[t].stableTime+=e;var n=this.getNextUtterance();if(n&&this.canAlertUtterance(n)){var r=n.getTextToAlert();this.phetioStartEvent("announced",{data:{utterance:r}}),this.ariaHerald.announcePolite(r),n.timeInQueue=0,this.phetioEndEvent()}}}},{key:"initializedAndEnabled",get:function(){return this._enabled&&this._initialized}},{key:"muted",set:function(e){this.setMuted(e)},get:function(){return this.getMuted()}},{key:"enabled",set:function(e){this.setEnabled(e)},get:function(){return this.getEnabled()}}],[{key:"fromFactory",value:function(){var e=new u,t=e.getAriaLiveContainer();document.body?document.body.appendChild(t):document.children[0].appendChild(t);return window.requestAnimationFrame(function e(t){phet.axon.timer.emit(t/1e3),window.requestAnimationFrame(e)}),e}}]),u}();return u.register("UtteranceQueue",l)}),n("UTTERANCE_QUEUE/ValueChangeUtterance",["require","PHET_CORE/merge","UTTERANCE_QUEUE/utteranceQueueNamespace","UTTERANCE_QUEUE/Utterance"],function(e){"use strict";var t=e("PHET_CORE/merge"),n=e("UTTERANCE_QUEUE/utteranceQueueNamespace"),r=e("UTTERANCE_QUEUE/Utterance"),i=function(e){function n(e){return _classCallCheck(this,n),e=t({alertStableDelay:1e3},e),_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return _inherits(n,r),n}();return n.register("ValueChangeUtterance",i)}),n("UTTERANCE_QUEUE/main",["require","UTTERANCE_QUEUE/utteranceQueueNamespace","UTTERANCE_QUEUE/ActivationUtterance","UTTERANCE_QUEUE/AlertableDef","UTTERANCE_QUEUE/AriaHerald","UTTERANCE_QUEUE/Utterance","UTTERANCE_QUEUE/UtteranceQueue","UTTERANCE_QUEUE/UtteranceQueueIO","UTTERANCE_QUEUE/ValueChangeUtterance"],function(e){"use strict";var t=e("UTTERANCE_QUEUE/utteranceQueueNamespace");return e("UTTERANCE_QUEUE/ActivationUtterance"),e("UTTERANCE_QUEUE/AlertableDef"),e("UTTERANCE_QUEUE/AriaHerald"),e("UTTERANCE_QUEUE/Utterance"),e("UTTERANCE_QUEUE/UtteranceQueue"),e("UTTERANCE_QUEUE/UtteranceQueueIO"),e("UTTERANCE_QUEUE/ValueChangeUtterance"),t}),function(){"use strict";n("utterance-queue-main",["require","AXON/main","PHET_CORE/main","UTTERANCE_QUEUE/main"],function(e){window.axon=e("AXON/main"),window.phetCore=e("PHET_CORE/main"),window.utteranceQueue=e("UTTERANCE_QUEUE/main")})}(),window.phet=window.phet||{},window.phet.axon=t("AXON/main"),window.phet.phetCore=t("PHET_CORE/main"),window.phet.utteranceQueue=t("UTTERANCE_QUEUE/main")}();